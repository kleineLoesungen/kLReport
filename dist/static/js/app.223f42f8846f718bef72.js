webpackJsonp([1],{"9Len":function(e,t){},"9M+g":function(e,t){},"9U5W":function(e,t){},BLvu:function(e,t){},BdcE:function(e,t){},Jmt5:function(e,t){},Kt8v:function(e,t){},LoQg:function(e,t){},MqRU:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a=n("pFYg"),s=n.n(a),l=n("fZjL"),r=n.n(l),o={name:"BasicSvgBubblePacking",props:{circleNodes:{type:Object,required:!0,default:{}},selectedKeys:{type:Array,required:!0,default:[]},consumeKeys:{type:Array,required:!0,default:[]},dependencyKeys:{type:Array,required:!0,default:[]},svgwidth:{type:Number,required:!1,default:600},svgheight:{type:Number,required:!1,default:600},paddingNodes:{type:Number,required:!1,default:3},legendNameFill:{type:Object,required:!0},keyProperty:{type:String,required:!1,default:"id"},displayProperty:{type:String,required:!1,default:"name"}},watch:{circleNodes:function(e,t){this.renderChart()},selectedKeys:function(e,t){this.fillNodes()},consumeKeys:function(e,t){this.fillNodes()},dependencyKeys:function(e,t){this.fillNodes()}},methods:{selectionChanged:function(e){this.$emit("nodeClick",e)},renderChart:function(){var e=this,t=this.keyProperty,n=this.displayProperty,i=this.svgwidth,a=this.svgheight,s=this.legendNameFill,l=d3.pack().size([i,a]).padding(this.paddingNodes),o=d3.hierarchy(this.circleNodes);o.sum(function(e){return 100}),l(o),d3.select("#svggraph").html("");var d=d3.select("#svggraph").append("svg").attr("width",i+2*this.paddingNodes).attr("height",a+2*this.paddingNodes).append("g"),c=d.selectAll("g.node").data(o.descendants()).enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"});c.append("circle").attr("class","element").attr("r",function(e){return e.r}).attr("fill",s.norelation.fill).on("click",function(n){e.selectionChanged(n.data[t])}),c.append("text").style("text-anchor","middle").attr("class","text-sm-center").attr("dy",function(e){return void 0!=e.children?-1*e.r+20:0}).text(function(e){return e.data.data[n].length>11?e.data.data[n].substring(0,parseInt(e.data.data[n].length/2)):e.data.data[n]}).append("tspan").style("text-anchor","middle").attr("class","text-sm-center").attr("dx",function(e){return-1*e.r*1.5}).attr("dy",10).text(function(e){if(e.data.data[n].length>11)return e.data.data[n].substring(parseInt(e.data.data[n].length/2))});var u=d.append("g").attr("transform",function(e){return"translate("+(i-150)+","+(a-70)+")"}).selectAll("g").data(r()(s));u.enter().append("circle").attr("class","legend").attr("cx",130).attr("cy",function(e,t){return 15*t}).attr("r",5).attr("fill",function(e,t){return s[e].fill}),u.enter().append("text").attr("dx",120).attr("dy",function(e,t){return 15*t+3}).attr("text-anchor","end").text(function(e,t){return s[e].name}),this.fillNodes()},fillNodes:function(){var e=this;switch(this.selectedKeys.length){case 0:d3.select("#svggraph").selectAll("circle.element").attr("fill",this.legendNameFill.norelation.fill);break;case 1:d3.select("#svggraph").selectAll("circle.element").attr("fill",function(t){return-1!=e.selectedKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.selection.fill:-1!=e.consumeKeys.indexOf(t.data[e.keyProperty])&&-1!=e.dependencyKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.bidirection.fill:-1!=e.consumeKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.consume.fill:-1!=e.dependencyKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.dependency.fill:e.legendNameFill.norelation.fill});break;default:d3.select("#svggraph").selectAll("circle.element").attr("fill",function(t){return-1!=e.selectedKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.selection.fill:e.legendNameFill.norelation.fill})}}}},d={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"col",attrs:{id:"svggraph"}})},staticRenderFns:[]};var c=n("VU/8")(o,d,!1,function(e){n("uEZm")},null,null).exports,u={props:{consumeRelations:{type:Array,required:!0,default:[]},dependencyRelations:{type:Array,required:!0,default:[]},show:{type:Boolean,required:!0,default:!1},elements:{type:Array,required:!0,default:[]}},created:function(){this.layerShowSwitch=!0,this.tableShowSwitch=!1},data:function(){return{layerShowSwitch:Boolean,tableShowSwitch:Boolean}},computed:{tabletOptions:function(){var e=[];return this.$tabletComponents.forEach(function(t){t.options.forEach(function(t){e.push(t)})}),e},tabletConsumeRelationSum:function(){var e=[],t=[];this.consumeRelations.forEach(function(e){var n=e.values.find(function(e){return"element"==e.name});void 0!=n&&t.push(n.value)});var n=this.elements.filter(function(e){if(-1!=t.indexOf(e.id)&&void 0!=e.values.find(function(e){return"tablet"==e.name}))return!0;return!1});return this.tabletOptions.forEach(function(t,i){e[i]=n.filter(function(e){return e.values.find(function(e){return"tablet"==e.name}).value==t}).length}),e},tabletDependencyRelationSum:function(){var e=[],t=[];this.dependencyRelations.forEach(function(e){var n=e.values.find(function(e){return"element"==e.name});void 0!=n&&t.push(n.value)});var n=this.elements.filter(function(e){if(-1!=t.indexOf(e.id)&&void 0!=e.values.find(function(e){return"tablet"==e.name}))return!0;return!1});return this.tabletOptions.forEach(function(t,i){e[i]=n.filter(function(e){return e.values.find(function(e){return"tablet"==e.name}).value==t}).length}),e},layerConsumeRelationSum:function(){var e=this,t=[];return this.$viewLayers.forEach(function(n,i){t[i]=e.consumeRelations.filter(function(e){return e.layer==n.name}).length}),t},layerDependencyRelationSum:function(){var e=this,t=[];return this.$viewLayers.forEach(function(n,i){t[i]=e.dependencyRelations.filter(function(e){return e.layer==n.name}).length}),t}},methods:{}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"row card p-3 mb-3"},[e._m(0),e._v(" "),n("div",{staticClass:"card-text"},[n("button",{class:{btn:!0,"btn-sm":!0,"mt-3":!0,"btn-secondary":e.layerShowSwitch,"btn-outline-dark":!e.layerShowSwitch},attrs:{type:"button"},on:{click:function(t){e.layerShowSwitch=!e.layerShowSwitch}}},[e._v("Analyse Ebenen")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:e.layerShowSwitch,expression:"layerShowSwitch"}],staticClass:"table table-sm table-borderless"},[e._m(1),e._v(" "),e._l(e.$viewLayers,function(t,i){return n("tr",{key:t.name},[n("th",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.layerConsumeRelationSum[i]))])]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.layerDependencyRelationSum[i]))])])])})],2),e._v(" "),n("button",{class:{btn:!0,"btn-sm":!0,"mt-3":!0,"btn-secondary":e.tableShowSwitch,"btn-outline-dark":!e.tableShowSwitch},attrs:{type:"button"},on:{click:function(t){e.tableShowSwitch=!e.tableShowSwitch}}},[e._v("Analyse Tablet")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:e.tableShowSwitch,expression:"tableShowSwitch"}],staticClass:"table table-sm table-borderless"},[e._m(2),e._v(" "),e._l(e.tabletOptions,function(t,i){return n("tr",{key:t},[n("th",[e._v(e._s(t))]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.tabletConsumeRelationSum[i]))])]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.tabletDependencyRelationSum[i]))])])])})],2)])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-title"},[t("h5",[this._v("Beziehungen")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td"),this._v(" "),t("td",[this._v("consume")]),this._v(" "),t("td",[this._v("dependency")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td"),this._v(" "),t("td",[this._v("consume")]),this._v(" "),t("td",[this._v("dependency")])])}]};var h=n("VU/8")(u,m,!1,function(e){n("MqRU")},"data-v-04c5b116",null).exports,v={props:{itemId:{type:String,required:!0}},data:function(){return{showDelButton:!1}},methods:{unlinkItem:function(){this.$emit("unlinkItem",this.itemId)}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showDelButton,expression:"!showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-iconstack",[n("b-icon",{attrs:{stacked:"",icon:"link"}}),e._v(" "),n("b-icon",{attrs:{stacked:"",icon:"slash",scale:"1.75"}})],1)],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-arrow-left-short")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.unlinkItem()}}},[n("b-iconstack",[n("b-icon",{attrs:{stacked:"",icon:"link"}}),e._v(" "),n("b-icon",{attrs:{stacked:"",icon:"slash",scale:"1.75"}})],1),e._v(" "),n("b-icon-check",{staticClass:"rounded white bg-danger",attrs:{variant:"white"}})],1)],1)},staticRenderFns:[]};var f=n("VU/8")(v,p,!1,function(e){n("Zh/s")},"data-v-2875e88a",null).exports,y={props:{lowerElements:{type:Array,required:!0}},components:{MyButtonUnlink:f},methods:{changeElement:function(e,t,n){this.$emit("changeElement",e,t,n)},deleteHierarchy:function(e){this.$emit("deleteHierarchy",e)},showElementDetails:function(e){this.$emit("showElementDetails",e)}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.lowerElements,function(t){return n("div",{key:t.id,staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("b-card",{staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"elem.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"elem.name"}})],1)]),e._v(" "),"Release"==t.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseStart",t.releaseStart)}},model:{value:t.releaseStart,callback:function(n){e.$set(t,"releaseStart",n)},expression:"elem.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseEnd",t.releaseEnd)}},model:{value:t.releaseEnd,callback:function(n){e.$set(t,"releaseEnd",n)},expression:"elem.releaseEnd"}})],1)]):e._e()])],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetails(t.id)}}},[n("b-icon-gear")],1),e._v(" "),n("my-button-unlink",{attrs:{"item-id":t.id},on:{unlinkItem:e.deleteHierarchy}})],1)])}),0)},staticRenderFns:[]};var g=n("VU/8")(y,b,!1,function(e){n("hcA5")},"data-v-1b1a7286",null).exports,w={props:{siblingElements:{type:Array,required:!0}},methods:{changeElement:function(e,t,n){this.$emit("changeElement",e,t,n)},showElementDetails:function(e){this.$emit("showElementDetails",e)}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.siblingElements,function(t){return n("div",{key:t.id,staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("b-card",{staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"elem.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"elem.name"}})],1)]),e._v(" "),"Release"==t.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseStart",t.releaseStart)}},model:{value:t.releaseStart,callback:function(n){e.$set(t,"releaseStart",n)},expression:"elem.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseEnd",t.releaseEnd)}},model:{value:t.releaseEnd,callback:function(n){e.$set(t,"releaseEnd",n)},expression:"elem.releaseEnd"}})],1)]):e._e()])],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetails(t.id)}}},[n("b-icon-gear")],1)],1)])}),0)},staticRenderFns:[]};var _=n("VU/8")(w,E,!1,function(e){n("XTta")},"data-v-7dcd56ca",null).exports,I={props:{ddItems:{type:Array,required:!0},buttonText:{type:String,required:!1,default:"Item"},allowNewValue:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{showAddItem:!1,newItem:"",showLinkItem:!1,linkedItem:""}},methods:{addItem:function(){this.$emit("addItem",this.newItem),this.showAddItem=!1,this.newItem=""},linkItem:function(){this.$emit("linkItem",this.linkedItem),this.showLinkItem=!1}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.allowNewValue||e.showAddItem||e.showLinkItem,expression:"allowNewValue || (showAddItem || showLinkItem)"}],staticClass:"col-2"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.allowNewValue&&!e.showAddItem&&!e.showLinkItem,expression:"allowNewValue && (!showAddItem && !showLinkItem)"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showAddItem=!e.showAddItem}}},[n("b-icon-plus"),e._v(" "+e._s(e.buttonText))],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem||e.showLinkItem,expression:"showAddItem || showLinkItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showAddItem=!1,e.showLinkItem=!1}}},[n("b-icon-arrow-left")],1)],1),e._v(" "),n("div",{staticClass:"col-5"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showLinkItem&&!e.showAddItem,expression:"!showLinkItem && !showAddItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showLinkItem=!e.showLinkItem}}},[n("b-icon-link"),e._v(" "+e._s(e.buttonText))],1),e._v(" "),n("b-form-select",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{options:e.ddItems},model:{value:e.linkedItem,callback:function(t){e.linkedItem=t},expression:"linkedItem"}}),e._v(" "),n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem,expression:"showAddItem"}],attrs:{type:"text"},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem,expression:"showAddItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){return e.addItem()}}},[n("b-icon-plus")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){return e.linkItem()}}},[n("b-icon-link")],1)],1)])},staticRenderFns:[]};var k=n("VU/8")(I,C,!1,function(e){n("QSIS")},"data-v-044a2a31",null).exports,R={props:{functionId:{type:String,required:!0},elements:{type:Array,required:!0},currentDisplayedId:{type:String,required:!1,default:""}},components:{MyButtonUnlink:f},data:function(){return{showEdit:!1,functionName:""}},computed:{ddFunctions:function(){return this.elements.filter(function(e){return"Applikationsfunktion"==e.type}).map(function(e){return{value:e.id,text:e.name}})},applicationsWithFunction:function(){var e=this,t=[];return this.elements.forEach(function(n){n.id!=e.currentDisplayedId&&(-1!=e.getElementValueArray(n,"functions").indexOf(e.functionId)&&t.push({id:n.id,name:n.name}))}),t}},mounted:function(){var e=this;this.functionName=this.elements.find(function(t){return t.id==e.functionId}).name},watch:{functionId:function(e){this.functionName=this.elements.find(function(t){return t.id==e}).name}},methods:{removeFunctionRelation:function(){var e={};e.elementId=this.currentDisplayedId,e.prop="functions",e.newValue=this.functionId,e.method="remove",this.$emit("changeElement",e)},changeFunctionName:function(){var e={};e.elementId=this.functionId,e.prop="name",e.newValue=this.functionName,this.$emit("changeElement",e),this.showEdit=!this.showEdit},showElementDetail:function(e){this.$emit("showElement",e)},getElementValueArray:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:[]}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-1"},[n("div",{staticClass:"container-fluid mb-2"},[n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-2"}),e._v(" "),n("div",{staticClass:"col-8"},[n("b-form-input",{attrs:{type:"text",disabled:!e.showEdit},model:{value:e.functionName,callback:function(t){e.functionName=t},expression:"functionName"}})],1),e._v(" "),n("div",{staticClass:"col-2"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showEdit,expression:"!showEdit"}],staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-gear")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.changeFunctionName()}}},[n("b-icon-check")],1),e._v(" "),n("my-button-unlink",{attrs:{"item-id":this.currentDisplayedId},on:{unlinkItem:function(t){return e.removeFunctionRelation()}}})],1)]),e._v(" "),e._l(e.applicationsWithFunction,function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],key:t.id,staticClass:"row mt-1"},[e._m(0,!0),e._v(" "),n("div",{staticClass:"col-6"},[n("b-form-input",{attrs:{type:"text",value:t.name,disabled:""}})],1),e._v(" "),n("div",{staticClass:"col-2"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetail(t.id)}}},[n("b-icon-gear")],1)],1)])})],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-4"},[t("small",[this._v("auch bereitgestellt durch")])])}]};var N=n("VU/8")(R,x,!1,function(e){n("kbEv")},"data-v-28d24a84",null).exports,S={props:{show:{type:Boolean,required:!0,default:!1},elementId:{type:String,required:!0,default:""},elements:{type:Array,required:!0,default:function(){return[]}},hierarchy:{type:Array,required:!0,default:function(){return[]}}},components:{MyFunctionSelectOption:N,MyElementModalChilds:g,MyItemModelAddLink:k,MyElementModalSiblings:_,MyButtonUnlink:f},data:function(){return{showComponentModel:this.show,displayedElementId:"",shownElementIds:[],newApplicationFunction:"",selectedApplicationFunction:"",showAddChild:!1,showLinkChild:!1,linkedChild:"",newChild:""}},computed:{displayedElement:function(){var e=this,t={},n=this.elements.find(function(t){return t.id==e.displayedElementId});return 0==this.displayedElementId.length||void 0==n?t:(t.id=n.id,t.name=n.name,t.type=n.type,t.description=this.getValue(n,"description"),"Release"==t.type?(t.releaseStart=this.getValue(n,"releaseStart"),t.releaseEnd=this.getValue(n,"releaseEnd")):"Applikationsinstanz"==t.type&&(t.functions=this.getValue(n,"functions")),t)},upperElement:function(){var e=this,t={},n=this.hierarchy.find(function(t){return t.subelemid==e.displayedElementId});if(0==this.displayedElementId.length||void 0==n)return t;var i=this.elements.find(function(e){return e.id==n.elemid});return t.id=i.id,t.name=i.name,t.type=i.type,t.description=this.getValue(i,"description"),t},ddUpperLayerElements:function(){var e=this;return this.elements.filter(function(t){return t.type==e.upperLayer()}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},siblingElements:function(){var e=this,t=[],n=this.hierarchy.filter(function(t){return t.elemid==e.upperElement.id&&t.subelemid!=e.displayedElementId});return 0==this.displayedElementId.length||0==n.length?t:(n.forEach(function(n){var i=e.elements.find(function(e){return e.id==n.subelemid}),a={};a.id=i.id,a.name=i.name,a.type=i.type,"Release"==a.type&&(a.releaseStart=e.getValue(i,"releaseStart"),a.releaseEnd=e.getValue(i,"releaseEnd")),t.push(a)}),t)},ddSiblingsLayerElements:function(){var e=this,t=this.siblingElements.map(function(e){return e.id}),n=this.hierarchy.map(function(e){return e.subelemid});return this.elements.filter(function(i){return i.type==e.displayedElement.type&&-1==t.indexOf(i.id)&&-1==n.indexOf(i.id)}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},lowerElements:function(){var e=this,t=[],n=this.hierarchy.filter(function(t){return t.elemid==e.displayedElementId});return 0==this.displayedElementId.length||0==n.length?t:(n.forEach(function(n){var i=e.elements.find(function(e){return e.id==n.subelemid}),a={};a.id=i.id,a.name=i.name,a.type=i.type,"Release"==a.type&&(a.releaseStart=e.getValue(i,"releaseStart"),a.releaseEnd=e.getValue(i,"releaseEnd")),t.push(a)}),t)},releaseElement:function(){for(var e,t=this,n=["Projekt","Funktionalität","Release"],i={},a=this.elements.find(function(e){return e.id==t.displayedElementId}),s=-1!=n.indexOf(a.type);-1==n.indexOf(a.type)&&!s;)void 0==(e=this.hierarchy.find(function(e){return e.subelemid==a.id}))?s=!0:a=this.elements.find(function(t){return t.id==e.elemid});if(0!=this.displayedElementId.length&&!s)return i.id=a.id,i.name=a.name,i.releaseStart=this.getValue(a,"releaseStart"),i.releaseEnd=this.getValue(a,"releaseEnd"),i},ddFunctions:function(){return this.elements.filter(function(e){return"Applikationsfunktion"==e.type}).map(function(e){return{value:e.id,text:e.name}})},lowerLayer:function(){var e=this.ddLayer(),t=e.indexOf(this.displayedElement.type);return t<e.length-1?e[t+1]:""},ddLowerLayerElements:function(){var e=this,t=this.lowerElements.map(function(e){return e.id}),n=this.hierarchy.map(function(e){return e.subelemid});return this.elements.filter(function(i){return i.type==e.lowerLayer&&-1==t.indexOf(i.id)&&-1==n.indexOf(i.id)}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})}},watch:{show:function(e){this.showComponentModel=e,e&&(this.displayedElementId=this.elementId)}},methods:{hideModal:function(){this.shownElementIds=[],this.$emit("closeModal")},changeElement:function(e,t,n){var i={};i.elementId=e,i.prop=t,i.newValue=n,this.emitChangeElement(i)},emitChangeElement:function(e){this.$emit("changeElement",e)},removeParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid=e,t.method="delete",this.$emit("changeHierarchy",t)},removeChild:function(e){var t={};t.subelemid=e,t.elemid=this.displayedElementId,t.method="delete",this.$emit("changeHierarchy",t)},addApplicationFunction:function(e){if(e.length>0){var t={};t.elementId=this.displayedElementId,t.prop="functions",t.newValue=e,t.method="add",this.$emit("changeElement",t),this.newApplicationFunction="",this.applicationFunction=""}},linkChild:function(e){var t={};t.subelemid=e,t.elemid=this.displayedElementId,t.method="link",this.$emit("changeHierarchy",t)},addChild:function(e){var t={};t.subelemid={name:e,type:this.lowerLayer},t.elemid=this.displayedElementId,t.method="add",this.$emit("changeHierarchy",t)},linkSibling:function(e){var t={};t.subelemid=e,t.elemid=this.upperElement.id,t.method="link",this.$emit("changeHierarchy",t)},addSibling:function(e){var t={};t.subelemid={name:e,type:this.displayedElement.type},t.elemid=this.upperElement.id,t.method="add",this.$emit("changeHierarchy",t)},linkParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid=e,t.method="link",this.$emit("changeHierarchy",t)},addParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid={name:e,type:this.upperLayer()},t.method="add",this.$emit("changeHierarchy",t)},getValue:function(e,t){if(void 0!=e){var n=e.values.find(function(e){return e.name==t});if(void 0!=n)return n.value}return""},getElementName:function(e){return this.elements.find(function(t){return t.id==e}).name},ddLayer:function(){return this.$viewLayers.map(function(e){return e.name})},upperLayer:function(){var e=this.ddLayer(),t=e.indexOf(this.displayedElement.type);return t>0?e[t-1]:""},ddElements:function(e){return this.elements.filter(function(t){return t.type==e}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},showElementDetails:function(e){this.shownElementIds.push(this.displayedElementId),this.displayedElementId=e},showLastElementDetails:function(){this.displayedElementId=this.shownElementIds.pop()}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{scrollable:"",size:"xl","ok-only":"",title:"Element Details"},on:{hide:e.hideModal,blur:e.hideModal,close:e.hideModal},model:{value:e.showComponentModel,callback:function(t){e.showComponentModel=t},expression:"showComponentModel"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.shownElementIds.length>0,expression:"shownElementIds.length > 0"}],staticClass:"m-1 mb-2",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showLastElementDetails()}}},[n("b-icon-arrow-left")],1),e._v(" "),e.upperLayer().length>0?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.upper-info",modifiers:{"upper-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("strong",[e._v("Übergeordnete Werte")])])],1),e._v(" "),n("b-collapse",{attrs:{id:"upper-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[void 0!=e.releaseElement?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("i",[e._v(e._s(e.releaseElement.name)+" (Ebene Release)")])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date",disabled:""},model:{value:e.releaseElement.releaseStart,callback:function(t){e.$set(e.releaseElement,"releaseStart",t)},expression:"releaseElement.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date",disabled:""},model:{value:e.releaseElement.releaseEnd,callback:function(t){e.$set(e.releaseElement,"releaseEnd",t)},expression:"releaseElement.releaseEnd"}})],1)])]),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-3",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showElementDetails(e.releaseElement.id)}}},[n("b-icon-gear")],1)],1)])]):e._e()])])],1)],1):e._e(),e._v(" "),e.upperLayer().length>0?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.upper-info",modifiers:{"upper-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("strong",[e._v("Eltern Element")]),e._v(" :: Ebene "+e._s(e.upperLayer()))])],1),e._v(" "),n("b-collapse",{attrs:{id:"upper-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-item-model-add-link",{directives:[{name:"show",rawName:"v-show",value:void 0==e.upperElement.id,expression:"upperElement.id == undefined"}],attrs:{ddItems:e.ddUpperLayerElements,buttonText:"Element"},on:{addItem:e.addParent,linkItem:e.linkParent}}),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.id,callback:function(t){e.$set(e.upperElement,"id",t)},expression:"upperElement.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.name,callback:function(t){e.$set(e.upperElement,"name",t)},expression:"upperElement.name"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Beschreibung:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.description,callback:function(t){e.$set(e.upperElement,"description",t)},expression:"upperElement.description"}})],1)])]),e._v(" "),n("div",{staticClass:"col-1"},[void 0!=e.upperElement.id?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showElementDetails(e.upperElement.id)}}},[n("b-icon-gear")],1):e._e(),e._v(" "),void 0!=e.upperElement.id?n("my-button-unlink",{attrs:{"item-id":e.upperElement.id},on:{unlinkItem:e.removeParent}}):e._e()],1)])],1)])],1)],1):e._e(),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.general-info",modifiers:{"general-info":!0}}],attrs:{block:"",variant:"primary"}},[n("strong",[e._v("Allgemein")])])],1),e._v(" "),n("b-collapse",{attrs:{id:"general-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Ebene:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddLayer(),disabled:!0},model:{value:e.displayedElement.type,callback:function(t){e.$set(e.displayedElement,"type",t)},expression:"displayedElement.type"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.displayedElement.id,callback:function(t){e.$set(e.displayedElement,"id",t)},expression:"displayedElement.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"name",e.displayedElement.name)}},model:{value:e.displayedElement.name,callback:function(t){e.$set(e.displayedElement,"name",t)},expression:"displayedElement.name"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Beschreibung:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-textarea",{attrs:{rows:"3","max-rows":"6"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"description",e.displayedElement.description)}},model:{value:e.displayedElement.description,callback:function(t){e.$set(e.displayedElement,"description",t)},expression:"displayedElement.description"}})],1)]),e._v(" "),"Release"==e.displayedElement.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"releaseStart",e.displayedElement.releaseStart)}},model:{value:e.displayedElement.releaseStart,callback:function(t){e.$set(e.displayedElement,"releaseStart",t)},expression:"displayedElement.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"releaseEnd",e.displayedElement.releaseEnd)}},model:{value:e.displayedElement.releaseEnd,callback:function(t){e.$set(e.displayedElement,"releaseEnd",t)},expression:"displayedElement.releaseEnd"}})],1)]):e._e(),e._v(" "),"Applikationsinstanz"==e.displayedElement.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("Funktionen")])]),e._v(" "),e._l(e.displayedElement.functions,function(t,i){return n("my-function-select-option",{key:t+i,attrs:{functionId:t,elements:e.elements,currentDisplayedId:e.displayedElement.id},on:{showElement:e.showElementDetails,changeElement:e.emitChangeElement}})}),e._v(" "),n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col-4"}),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-select",{attrs:{options:e.ddFunctions},model:{value:e.selectedApplicationFunction,callback:function(t){e.selectedApplicationFunction=t},expression:"selectedApplicationFunction"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.addApplicationFunction(e.selectedApplicationFunction)}}},[n("b-icon-link")],1)],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-4"}),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",placeholder:"Neue Applikationsfunktion"},model:{value:e.newApplicationFunction,callback:function(t){e.newApplicationFunction=t},expression:"newApplicationFunction"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.addApplicationFunction(e.newApplicationFunction)}}},[n("b-icon-plus")],1)],1)])],2)]):e._e()])])],1)],1),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sibling-info",modifiers:{"sibling-info":!0}}],attrs:{block:"",variant:"outline-primary"}},[n("strong",[e._v("Geschwister Elemente")]),e._v(" :: Ebene "+e._s(e.displayedElement.type))])],1),e._v(" "),n("b-collapse",{attrs:{id:"sibling-info"}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-item-model-add-link",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.upperElement.id,expression:"upperElement.id != undefined"}],attrs:{ddItems:e.ddSiblingsLayerElements,buttonText:"Element"},on:{addItem:e.addSibling,linkItem:e.linkSibling}}),e._v(" "),n("my-element-modal-siblings",{attrs:{siblingElements:e.siblingElements},on:{changeElement:e.changeElement,showElementDetails:e.showElementDetails}})],1)])],1)],1),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.lower-info",modifiers:{"lower-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("strong",[e._v("Kinder Elemente")]),e._v(" :: Ebene "+e._s(e.lowerLayer))])],1),e._v(" "),n("b-collapse",{attrs:{id:"lower-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-item-model-add-link",{attrs:{ddItems:e.ddLowerLayerElements,buttonText:"Element"},on:{addItem:e.addChild,linkItem:e.linkChild}}),e._v(" "),n("my-element-modal-childs",{attrs:{lowerElements:e.lowerElements},on:{changeElement:e.changeElement,deleteHierarchy:e.removeChild,showElementDetails:e.showElementDetails}})],1)])],1)],1)],1)},staticRenderFns:[]};var V=n("VU/8")(S,$,!1,function(e){n("9Len")},"data-v-7a730e45",null).exports,L={name:"TheSvgSection",props:{consumeRelations:{type:Array,required:!0,default:function(){return[]}},dependencyRelations:{type:Array,required:!0,default:function(){return[]}},elements:{type:Array,required:!0,default:function(){return[]}},hierarchy:{type:Array,required:!0,default:function(){return[]}}},components:{BasicSvgBubblePacking:c,TheOverviewRelations:h,MyElementModal:V},data:function(){return{graphWidth:600,graphHeight:600,selectedGrouping:"",selectedNodeLayer:"",selectedNodeIds:[],showElementModal:!1,myUrl:"#",myfilename:""}},created:function(){this.graphWidth=window.innerHeight-150,this.graphHeight=window.innerHeight-150,this.selectedGrouping=this.$viewLayers[0].name,this.selectedNodeLayer=this.$viewLayers[0].name},computed:{graphNodes:function(){return this.generateSvgNodes()},selectedNestedIds:function(){var e=this,t=[];return this.selectedNodeIds.forEach(function(n){t=t.concat(e.getNestedIds(n,0),{value:n,depth:0,parent:n})}),t},selectedConsumeNodes:function(){var e=this;if(1==this.selectedNodeIds.length){var t=this.consumeRelations.map(function(t){var n=e.selectedNestedIds[e.selectedNestedIds.map(function(e){return e.value}).indexOf(t.startId)];return{value:t.endId,depth:n.depth}});return this.upScaleNodes(t)}return[]},selectedDependencyNodes:function(){var e=this,t=this.dependencyRelations.map(function(t){var n=e.selectedNestedIds[e.selectedNestedIds.map(function(e){return e.value}).indexOf(t.endId)];return{value:t.startId,depth:void 0!=n?n.depth:-1}});return this.upScaleNodes(t)}},watch:{selectedNestedIds:function(e){this.$emit("selectionChanged",e,this.selectedNodeIds)},selectedGrouping:function(){this.selectedNodeIds=[]},selectedNodeLayer:function(){this.selectedNodeIds=[]}},methods:{emitDownloadRequirements:function(){this.$emit("autoDownloadRequirements")},emitLoadStorage:function(){this.$emit("loadStorage")},changeSelectedElementIds:function(e){-1==this.selectedNodeIds.indexOf(e)?this.selectedNodeIds.push(e):this.selectedNodeIds.splice(this.selectedNodeIds.indexOf(e),1)},upScaleNodes:function(e){for(var t=[],n=e.length,i=0;i<n;i++){for(var a=e[i],s=a.depth,l=a.value,r=a.value;s>0;)void 0!=(r=this.hierarchy.find(function(e){return e.subelemid==l}))?(l=r.elemid,s--):s=0;-1==t.indexOf(l)&&t.push(l)}return t},getNestedIds:function(e,t){var n=this.hierarchy.filter(function(t){return t.elemid==e}),i=n.length,a=[];if(i>0){a=n.map(function(e){return{value:e.subelemid,depth:t+1}});for(var s=0;s<i;s++)a=a.concat(this.getNestedIds(n[s].subelemid,t+1))}return 0==t?a.map(function(t){return t.parent=e,t}):a},getNestedLayerNodes:function(e,t){for(var n=this,i=this.hierarchy.filter(function(t){return t.elemid==e}).map(function(e){return n.elements.find(function(t){return t.id==e.subelemid})}),a=[],s=0;s<i.length;s++)i[s].type==t?a.push({id:i[s].id,name:i[s].name}):a=a.concat(this.getNestedLayerNodes(i[s].id,t));return a},generateSvgNodes:function(){var e=this;if(void 0==this.elements)return[];this.selectedNodeLayer;var t=[];switch(this.selectedNodeLayer){case this.$viewLayers[5].name:case this.$viewLayers[4].name:case this.$viewLayers[3].name:case this.$viewLayers[2].name:case this.$viewLayers[1].name:var n=[],i=[];this.elements.filter(function(t){return t.type==e.selectedGrouping}).forEach(function(a){(n=e.getNestedLayerNodes(a.id,e.selectedNodeLayer)).length>0&&(t=t.concat(n.map(function(e){return{id:e.id,name:e.name,parentNodeId:a.id}})),i.push(a.id))}),i.forEach(function(n){var i=e.elements.find(function(e){return e.id==n}).name;t.push({id:n,name:i,parentNodeId:"ELM0"})});var a=this.elements.filter(function(t){return t.type==e.selectedNodeLayer}).filter(function(e){return-1==t.map(function(e){return e.id}).indexOf(e.id)});(t=t.concat(a.map(function(e){return{id:e.id,name:e.name,parentNodeId:"ELMPRJ0"}}))).push({id:"ELMPRJ0",name:"No Project",parentNodeId:"ELM0"});break;default:case this.$viewLayers[0].name:t=this.elements.filter(function(t){return t.type==e.$viewLayers[0].name}).map(function(e){return{id:e.id,name:e.name,parentNodeId:"ELM0"}})}return(t=t.filter(function(e,t,n){return n.map(function(e){return e.id}).indexOf(e.id)===t})).push({id:"ELM0",name:"",parentNodeId:""}),d3.stratify().id(function(e){return e.id}).parentId(function(e){return e.parentNodeId})(t)},changeElement:function(e){this.$emit("changeElement",e)},changeHierarchy:function(e){this.$emit("changeHierarchy",e)},showElementDetails:function(){this.showElementModal=!0},hideElementDetails:function(){this.showElementModal=!1}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"container-fluid m-2"},[n("div",{staticClass:"row mb-4"},[n("div",{staticClass:"col form-check form-check-inline"},[n("small",{staticClass:"form-text text-muted"},[e._v("Interaktives Diagramm:\n          "),n("ul",[n("li",[e._v("\n              Einfach-"),n("svg",{staticClass:"bi bi-cursor-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"}})]),e._v("\n              :: Eingrenzung der Darstellung und Tabelle auf Selektion\n              (Mehrfachselektion möglich)\n            ")])])])])]),e._v(" "),n("div",{staticClass:"row w-75 mb-4"},[n("basic-svg-bubble-packing",{attrs:{"circle-nodes":e.graphNodes,"selected-keys":e.selectedNodeIds,"consume-keys":e.selectedConsumeNodes,"dependency-keys":e.selectedDependencyNodes,svgwidth:e.graphWidth,svgheight:e.graphHeight,"padding-nodes":3,"legend-name-fill":e.$relationTypes,"key-property":"id","display-property":"name"},on:{nodeClick:e.changeSelectedElementIds}}),e._v(" "),n("div",{staticClass:"col-sm"},[n("div",{staticClass:"row card p-3 mb-3"},[e._m(0),e._v(" "),n("div",{staticClass:"card-text"},[n("div",{staticClass:"row m-2"},[n("small",[e._v("Gruppierung:")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGrouping,expression:"selectedGrouping"}],staticClass:"custom-select graph-sidebar",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedGrouping=t.target.multiple?n:n[0]}}},e._l(e.$viewLayers,function(t){return n("option",{key:t.name},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),0)]),e._v(" "),n("div",{staticClass:"row m-2"},[n("small",[e._v("Ebene:")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedNodeLayer,expression:"selectedNodeLayer"}],staticClass:"custom-select graph-sidebar",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedNodeLayer=t.target.multiple?n:n[0]}}},e._l(e.$viewLayers,function(t){return n("option",{key:t.name},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),0)]),e._v(" "),n("div",{staticClass:"row m-2"},[e._v("\n              Schriftgröße | View auf Selektion eingrenzen (keine Selektion >\n              wieder alle anzeigen)\n            ")])])]),e._v(" "),1==e.selectedNodeIds.length?n("div",{staticClass:"row card p-3 mb-3"},[n("div",{staticClass:"card-title"},[n("h5",[e._v("Element")]),e._v(" "),n("b-button",{attrs:{size:"sm",variante:"outline-info"},on:{click:e.showElementDetails}},[e._v("Details / bearbeiten")])],1),e._v(" "),e._m(1),e._v(" "),n("my-element-modal",{attrs:{show:e.showElementModal,elementId:e.selectedNodeIds[0],elements:e.elements,hierarchy:e.hierarchy},on:{closeModal:e.hideElementDetails,changeElement:e.changeElement,changeHierarchy:e.changeHierarchy}})],1):e._e(),e._v(" "),n("the-overview-relations",{attrs:{consumeRelations:e.consumeRelations,dependencyRelations:e.dependencyRelations,show:e.selectedNodeIds.length>0,elements:e.elements}})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-title"},[t("h5",[this._v("Diagramm")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-text"},[t("small",[this._v("Name | Upper-Element | Lower-Elements")])])}]};var A=n("VU/8")(L,q,!1,function(e){n("qn0X")},"data-v-bfe93580",null).exports,D={props:{itemId:{type:String,required:!0}},data:function(){return{showDelButton:!1}},methods:{deleteItem:function(){this.$emit("deleteItem",this.itemId)}}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showDelButton,expression:"!showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-trash")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-arrow-left-short")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.deleteItem()}}},[n("b-icon-trash"),e._v(" "),n("b-icon-check",{staticClass:"rounded white bg-danger",attrs:{variant:"white"}})],1)],1)},staticRenderFns:[]};var O=n("VU/8")(D,M,!1,function(e){n("RjPl")},"data-v-e3ee71e4",null).exports,B={props:{elements:{type:Array,required:!1,default:function(){return[]}},relations:{type:Array,required:!1,default:function(){return[]}},selectedItemId:{type:String,required:!0},isEditable:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{showEdit:!1,elementId:"",elementName:"",elementLayer:""}},computed:{ddItems:function(){var e=this,t=[{label:"keine Auswahl",options:[""]}];if(this.elements.length>0){var n={label:"Elements",options:[]};n.options=this.elements.filter(function(t){return t.type==e.elementLayer}).map(function(e){return{value:e.id,text:e.name+" ("+e.id+")"}}),t.push(n)}if(this.relations.length>0){var i={label:"Beziehungen",options:[]};i.options=this.relations.filter(function(t){return t.layer==e.elementLayer}).map(function(e){return{value:e.id,text:"("+e.startId+" > "+e.endId+")"}}),t.push(i)}return t},formInputName:function(){return this.elementName.length>0?this.elementLayer+": "+this.elementName:"no linked item"},ddLayer:function(){return this.$viewLayers.map(function(e){return e.name})}},mounted:function(){this.setValues()},watch:{selectedItemId:function(e){this.setValues()}},methods:{setValues:function(){var e=this;if(void 0!=this.selectedItemId&&this.selectedItemId.length>0){this.elementId=this.selectedItemId;var t=this.elements.find(function(t){return t.id==e.selectedItemId});this.elementLayer=void 0!=t?t.type:"",this.elementName=void 0!=t?t.name:""}else this.elementLayer="",this.elementId="",this.elementName=""},changeItem:function(){this.$emit("changeItem",this.elementId),this.showEdit=!1}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEdit,expression:"!showEdit"}],staticClass:"col"},[n("b-form-input",{attrs:{value:e.formInputName,disabled:""}},[e._v(e._s())])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditable&!e.showEdit,expression:"isEditable & !showEdit"}],staticClass:"col"},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-gear")],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"col-1"},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-arrow-left")],1)],1),e._v(" "),e.showEdit?n("div",{staticClass:"col-4"},[n("b-form-select",{attrs:{options:e.ddLayer},model:{value:e.elementLayer,callback:function(t){e.elementLayer=t},expression:"elementLayer"}})],1):e._e(),e._v(" "),e.showEdit?n("div",{staticClass:"col-7"},[n("b-form-select",{attrs:{options:e.ddItems},on:{change:function(t){return e.changeItem()}},model:{value:e.elementId,callback:function(t){e.elementId=t},expression:"elementId"}})],1):e._e()])},staticRenderFns:[]};var z=n("VU/8")(B,F,!1,function(e){n("BLvu")},"data-v-528c3970",null).exports,T={props:{relationItemId:{type:String,required:!0,default:""},show:{type:Boolean,default:!1},elements:{type:Array,required:!0,default:function(){return[]}},relations:{type:Array,required:!0,default:function(){return[]}}},components:{MyDropdownItem:z,MyItemModelAddLink:k},data:function(){return{displayedRelationId:"",showComponentModel:this.show,ddSolved:[],viewHistory:[]}},computed:{displayedRelation:function(){var e=this,t={},n=this.relations.find(function(t){return t.id==e.displayedRelationId});if(0==this.displayedRelationId.length||void 0==n)return t;var i=this.getValue(n,"element");if(t.id=n.id,t.type=i.length>0?"Requirement":"Architektur",t.tablet=this.getValue(n,"tablet"),t.layer=n.layer,t.startId=n.startId,t.endId=n.endId,t.title=this.getValue(n,"title"),t.description=this.getValue(n,"description"),i.length>0){var a=this.elements.find(function(e){return e.id==i});t.tablet=this.getValue(a,"tablet"),t.title=a.name,t.description=this.getValue(a,"description"),t.requirement={},t.requirement.id=a.id,t.requirement.commitment=this.getValue(a,"commitment"),t.requirement.benefit=this.getValue(a,"benefit"),t.requirement.sourcedetails=this.getValue(a,"sourcedetails"),t.requirement.relations=[],this.relations.filter(function(e){return void 0!=e.values.find(function(e){return"element"==e.name})}).forEach(function(n){if(n.values.find(function(e){return"element"==e.name}).value==a.id){var i={id:n.id,endId:n.endId,solved:e.getValue(n,"solved"),status:e.getValue(n,"status"),comment:e.getValue(n,"comment")};t.requirement.relations.push(i)}})}return t},isRequirement:function(){return"Requirement"==this.displayedRelation.type},ddLayeredElements:function(){var e=this.elements.filter(function(e){return-1==["Requirement","Applikationsfunktion"].indexOf(e.type)}).map(function(e){return{value:e.id,text:e.name,type:e.type}}),t=d3.nest().key(function(e){return e.type}).entries(e);return t=t.map(function(e){return{label:e.key,options:e.values.sort(function(e,t){return e.text<t.text?-1:1})}})}},watch:{show:function(e){this.showComponentModel=e,e&&(this.displayedRelationId=this.relationItemId)},relationItemId:function(e){this.displayedRelationId=this.relationItemId}},methods:{changeSolved:function(e){this.itemChanged(e,"solved")},changeStart:function(e){this.itemChanged(e,"startId")},changeEnd:function(e){this.itemChanged(e,"endId")},itemChanged:function(e,t){var n={};n.relationId=this.displayedRelation.id,n.prop=t,n.newValue=e,this.$emit("recordChange",n)},hideModal:function(){this.viewHistory=[],this.$emit("closeModal",!1)},getLayer:function(e){return void 0!=e&&e.length>0?this.elements.find(function(t){return t.id==e}).type:""},getValue:function(e,t){if(void 0!=e){var n=e.values.find(function(e){return e.name==t});if(void 0!=n)return n.value}return""},ddLayer:function(){return this.$viewLayers.map(function(e){return e.name})},ddTablet:function(){return this.$tabletComponents},ddCommitment:function(){return this.$commitment},ddStatus:function(){return this.$relationStatus},ddElements:function(e){return this.elements.filter(function(t){return t.type==e}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},linkRealization:function(e){var t={};t.startId=this.displayedRelation.startId,t.endId=e,t.type="Requirement",t.element=this.displayedRelation.requirement.id,this.$emit("addRelation",t)},showLastView:function(){var e=this.viewHistory.pop();this.$emit("showRelationDetails",e)},showRelation:function(e){console.log(e),this.viewHistory.push(this.displayedRelation.id),this.$emit("showRelationDetails",e)}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{scrollable:"",size:"xl","ok-only":"",title:e.displayedRelation.type+"-Beziehung (ID: "+e.displayedRelation.id+")"},on:{hide:e.hideModal,blur:e.hideModal,close:e.hideModal},model:{value:e.showComponentModel,callback:function(t){e.showComponentModel=t},expression:"showComponentModel"}},[n("div",{staticClass:"container-fluid"},[e.viewHistory.length>0?n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col"},[n("b-button",{attrs:{variant:"outline-dark"},on:{click:function(t){return e.showLastView()}}},[n("b-icon-arrow-left")],1)],1)]):e._e(),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"accordion",attrs:{role:"tablist"}},[n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.general-info",modifiers:{"general-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[e._v("Allgemein")])],1),e._v(" "),n("b-collapse",{attrs:{id:"general-info",visible:"",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.displayedRelation.id,callback:function(t){e.$set(e.displayedRelation,"id",t)},expression:"displayedRelation.id"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Typ:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.displayedRelation.type,callback:function(t){e.$set(e.displayedRelation,"type",t)},expression:"displayedRelation.type"}})],1)]),e._v(" "),e.isRequirement?e._e():n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Ebene:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddLayer(),disabled:""},model:{value:e.displayedRelation.layer,callback:function(t){e.$set(e.displayedRelation,"layer",t)},expression:"displayedRelation.layer"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Tablet:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddTablet()},on:{change:function(t){return e.itemChanged(e.displayedRelation.tablet,"tablet")}},model:{value:e.displayedRelation.tablet,callback:function(t){e.$set(e.displayedRelation,"tablet",t)},expression:"displayedRelation.tablet"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Start:")]),e._v(" "),e.isRequirement?e._e():n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddElements(e.displayedRelation.layer)},on:{change:function(t){return e.itemChanged(e.displayedRelation.startId,"startId")}},model:{value:e.displayedRelation.startId,callback:function(t){e.$set(e.displayedRelation,"startId",t)},expression:"displayedRelation.startId"}})],1),e._v(" "),e.isRequirement?n("div",{staticClass:"col-10"},[n("my-dropdown-item",{attrs:{elements:e.elements,selectedItemId:e.displayedRelation.startId},on:{changeItem:e.changeStart}})],1):e._e()]),e._v(" "),e.isRequirement?e._e():n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Ende:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddElements(e.displayedRelation.layer)},on:{change:function(t){return e.itemChanged(e.displayedRelation.endId,"endId")}},model:{value:e.displayedRelation.endId,callback:function(t){e.$set(e.displayedRelation,"endId",t)},expression:"displayedRelation.endId"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Titel:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-textarea",{attrs:{rows:"1","max-rows":"4"},on:{change:function(t){return e.itemChanged(e.displayedRelation.title,"title")}},model:{value:e.displayedRelation.title,callback:function(t){e.$set(e.displayedRelation,"title",t)},expression:"displayedRelation.title"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Beschreibung:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-textarea",{attrs:{rows:"3","max-rows":"6"},on:{change:function(t){return e.itemChanged(e.displayedRelation.description,"description")}},model:{value:e.displayedRelation.description,callback:function(t){e.$set(e.displayedRelation,"description",t)},expression:"displayedRelation.description"}})],1)])])])],1)],1),e._v(" "),e.isRequirement?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-info",modifiers:{"requirement-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[e._v("Requirement")])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-info",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Verbindlichkeit:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddCommitment()},on:{change:function(t){return e.itemChanged(e.displayedRelation.requirement.commitment,"commitment")}},model:{value:e.displayedRelation.requirement.commitment,callback:function(t){e.$set(e.displayedRelation.requirement,"commitment",t)},expression:"displayedRelation.requirement.commitment"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Mehrwert:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text"},on:{change:function(t){return e.itemChanged(e.displayedRelation.requirement.benefit,"benefit")}},model:{value:e.displayedRelation.requirement.benefit,callback:function(t){e.$set(e.displayedRelation.requirement,"benefit",t)},expression:"displayedRelation.requirement.benefit"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Quellen-Details:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text"},on:{change:function(t){return e.itemChanged(e.displayedRelation.requirement.sourcedetails,"sourcedetails")}},model:{value:e.displayedRelation.requirement.sourcedetails,callback:function(t){e.$set(e.displayedRelation.requirement,"sourcedetails",t)},expression:"displayedRelation.requirement.sourcedetails"}})],1)])])])],1)],1):e._e(),e._v(" "),e.isRequirement?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-targets",modifiers:{"requirement-targets":!0}}],attrs:{block:"",variant:"outline-dark"}},[e._v("Realisierung")])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-targets",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-item-model-add-link",{staticClass:"mb-2",attrs:{ddItems:e.ddLayeredElements,buttonText:"Relation",allowNewValue:!1},on:{linkItem:e.linkRealization}}),e._v(" "),e._l(e.displayedRelation.requirement.relations,function(t){return n("b-card",{key:t.id,staticClass:"m-1 p-2",attrs:{"no-body":""}},[t.id!=e.displayedRelation.id?n("div",{staticClass:"row mt-2 mb-2"},[n("div",{staticClass:"col"},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showRelation(t.id)}}},[n("b-icon-gear")],1)],1)]):e._e(),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Ende:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("my-dropdown-item",{attrs:{elements:e.elements,selectedItemId:t.endId,isEditable:t.id==e.displayedRelation.id},on:{changeItem:e.changeEnd}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-3"},[e._v("Status:")]),e._v(" "),n("div",{staticClass:"col-9"},[n("b-form-select",{attrs:{options:e.ddStatus(),disabled:t.id!=e.displayedRelation.id},on:{change:function(n){return e.itemChanged(t.status,"status")}},model:{value:t.status,callback:function(n){e.$set(t,"status",n)},expression:"rel.status"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-3"},[e._v("Realisiert:")]),e._v(" "),n("div",{staticClass:"col-9"},[n("my-dropdown-item",{attrs:{elements:e.elements,relations:e.relations,selectedItemId:t.solved,isEditable:t.id==e.displayedRelation.id},on:{changeItem:e.changeSolved}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-3"},[e._v("Bemerkung:")]),e._v(" "),n("div",{staticClass:"col-9"},[n("b-form-textarea",{attrs:{rows:"2","max-rows":"4",disabled:t.id!=e.displayedRelation.id},on:{change:function(n){return e.itemChanged(t.comment,"comment")}},model:{value:t.comment,callback:function(n){e.$set(t,"comment",n)},expression:"rel.comment"}})],1)])])})],2)])],1)],1):e._e()],1)])])])])},staticRenderFns:[]};var j=n("VU/8")(T,H,!1,function(e){n("Kt8v")},"data-v-110014c8",null).exports,U={props:{headers:{type:Array,required:!0,default:function(){return[]}},records:{type:Array,required:!0,default:function(){return[]}},elements:{type:Array,required:!0,default:function(){return[]}},relations:{type:Array,required:!0,default:function(){return[]}},addedItemId:{type:String,required:!1,default:""}},components:{MyRelationModal:j,MyButtonDelete:O},data:function(){return{selectedRelationItemId:"",showModal:!1,showDel:[]}},computed:{tableColumns:function(){return this.headers},tableObjects:function(){return this.records}},watch:{addedItemId:function(e){e.length>0&&this.showRelationDetails(e)},tableObjects:function(e){var t=this;e.forEach(function(e,n){t.showDel[n]=!1})}},methods:{hideRelationDetails:function(e){this.showModal=!1},showRelationDetails:function(e){this.selectedRelationItemId=e,this.showModal=!0},deleteRelation:function(e){this.$emit("deleteRelation",e)},itemChanged:function(e){this.$emit("changeRelation",e)},elementNameById:function(e){var t="<external>",n=this.elements.find(function(t){return t.id==e});return void 0!=n&&(t=n.name),t},addRelation:function(e){void 0==e.type&&(e.type="Relation"),this.$emit("newRelation",e)},addRequirement:function(e){void 0==e.type&&(e.type="Requirement"),this.$emit("newRelation",e)}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid mt-3"},[n("div",{staticClass:"row"},[n("my-relation-modal",{attrs:{relationItemId:e.selectedRelationItemId,show:e.showModal,elements:e.elements,relations:e.relations},on:{closeModal:e.hideRelationDetails,recordChange:e.itemChanged,addRelation:e.addRelation,showRelationDetails:e.showRelationDetails}})],1),e._v(" "),n("div",{staticClass:"row mt-3"},[n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-dark"},on:{click:function(t){return e.addRelation({})}}},[n("b-icon-node-plus"),e._v(" Architektur-Beziehung")],1),e._v(" "),n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-dark"},on:{click:function(t){return e.addRequirement({})}}},[n("b-icon-node-plus"),e._v(" Requirement")],1)],1),e._v(" "),n("div",{staticClass:"row mt-2"},[n("b-table",{attrs:{striped:"",hover:"",items:e.tableObjects,fields:e.tableColumns,"primary-key":"id"},scopedSlots:e._u([{key:"cell(start)",fn:function(t){return[e._v("\n                "+e._s(e.elementNameById(t.item.startId))+"\n            ")]}},{key:"cell(ende)",fn:function(t){return[e._v("\n                "+e._s(e.elementNameById(t.item.endId))+"\n            ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showRelationDetails(t.item.id)}}},[n("b-icon-gear")],1),e._v(" "),n("my-button-delete",{attrs:{itemId:t.item.id},on:{deleteItem:e.deleteRelation}})]}}])})],1)])},staticRenderFns:[]};var K=n("VU/8")(U,P,!1,function(e){n("PW0+")},"data-v-1d90f0ac",null).exports,W={props:{relations:{type:Array,required:!0,default:function(){return[]}},elements:{type:Array,required:!0,default:function(){return[]}},addedRelationId:{type:String,required:!1,default:""},alertMessage:{type:String,required:!1,default:""}},components:{TheRelationsTable:K},data:function(){return{showAlertMessage:!1}},watch:{alertMessage:function(e){!this.showAlertMessage&&e.length>0?this.showAlertMessage=!0:0==e.length&&(this.showAlertMessage=!1)}},computed:{tableHeader:function(){return[{key:"actions",label:"Aktionen",sortable:!1},{key:"id",sortable:!1},{key:"layer",label:"Ebene",sortable:!0},{key:"type",label:"Typ",sortable:!0},{key:"start",sortable:!0},{key:"ende",sortable:!0},{key:"tablet",sortable:!0},{key:"title",label:"Titel",sortable:!0},{key:"description",label:"Beschreibung",sortable:!0}]},tableObjects:function(){var e=this;return this.relations.length>0?this.relations.map(function(t){var n=e.getContentByRelation(t),i={id:t.id,type:n.type,startId:t.startId,endId:t.endId,layer:t.layer,title:n.title,description:n.description,tablet:n.tablet};return"Requirement"==n.type&&(i.commitment=n.commitment,i.status=n.status,i.solved=n.solved),i}):[]}},methods:{getRelationChange:function(e){this.$emit("changeRelation",e)},getContentByRelation:function(e){var t={},n=e.values.find(function(e){return"element"==e.name});if(void 0!=n){t.type="Requirement";var i=this.elements.find(function(e){return e.id==n.value});t.title=i.name,t.description=this.getObjectValueByName(i,"description"),t.tablet=this.getObjectValueByName(i,"tablet"),t.commitment=this.getObjectValueByName(i,"commitment"),t.status=this.getObjectValueByName(i,"status"),t.solved=this.getObjectValueByName(i,"solved")}else t.type="Architektur",t.tablet="<not supported>",void 0!=(n=e.values.find(function(e){return"data"==e.name}))?(t.title="none",t.description=n.value):(t.title=this.getObjectValueByName(e,"title"),t.description=this.getObjectValueByName(e,"description"));return t},getObjectValueByName:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:""},addRelation:function(e){this.$emit("newRelation",e)},deleteRelation:function(e){this.$emit("deleteRelation",e)},emitClose:function(){this.$emit("alertClose")}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row ml-2"},[n("b-alert",{attrs:{show:e.showAlertMessage,variant:"danger",dismissible:""},on:{dismissed:function(t){return e.emitClose()}}},[e._v("\n        "+e._s(e.alertMessage)+"\n    ")]),e._v(" "),n("the-relations-table",{attrs:{headers:e.tableHeader,records:e.tableObjects,elements:e.elements,relations:e.relations,"added-item-id":e.addedRelationId},on:{changeRelation:e.getRelationChange,newRelation:e.addRelation,deleteRelation:e.deleteRelation}})],1)},staticRenderFns:[]};var G=n("VU/8")(W,Q,!1,function(e){n("LoQg")},"data-v-1df7e760",null).exports,Z=n("mvHQ"),J=n.n(Z),X={methods:{loadTextFromFile:function(e){var t=this,n=e.target.files[0],i=new FileReader;i.onload=function(e){return t.$emit("load",e.target.result)},i.readAsText(n)}}},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"text-reader"},[t("input",{attrs:{type:"file"},on:{change:this.loadTextFromFile}})])},staticRenderFns:[]};var ee=n("VU/8")(X,Y,!1,function(e){n("BdcE")},"data-v-27297119",null).exports,te={props:{storage:{type:Object,required:!0}},components:{BasicInputFileReader:ee},methods:{loadStorage:function(e){try{var t=JSON.parse(e);this.$emit("newData",t)}catch(e){alert(e.message)}},downloadStorage:function(){var e=encodeURIComponent(J()(this.storage));this.generateFileAndDownload("data:text/csv;charset=utf-8,"+e,"databaseCLReport_"+this.getCurrentDate()+".txt")},downloadRequirements:function(){var e=this,t="".concat("Id;","Übergeordnete Id;","Titel;","Beschreibung;","Mehrwert;","Typ;","IT-Service Tablet;","Verbindlichkeit;","zu erfüllen von;","gestellt von;","Quellenzusatz;","Zeitpunkt Vorhaben;","Bemerkung\n");this.storage.relations.filter(function(e){return void 0!=e.values.find(function(e){return"element"==e.name})}).forEach(function(n){var i=n.values.find(function(e){return"element"==e.name}).value,a=e.storage.elements.find(function(e){return e.id==i});t=t.concat(a.id+";","Übergeordnete Id;",a.name+";",e.getObjectValueByName(a,"description")+";","Mehrwert;","Typ;",e.getObjectValueByName(a,"tablet")+";",e.getObjectValueByName(a,"commitment")+";",n.endId+";",n.startId+";","Quellenzusatz;","Zeitpunkt Vorhaben;",e.getObjectValueByName(a,"comment")+"\n")}),this.generateFileAndDownload("data:text/csv;charset=utf-8,"+encodeURI(t),"CLrequirements_"+this.getCurrentDate()+".txt")},generateFileAndDownload:function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click()},getCurrentDate:function(){return new Date(Date.now()).toISOString().substr(0,10)}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row w-100 bg-light p-1"},[n("div",{staticClass:"col-4"},[e._v("\n  Select Daten: \n    "),n("basic-input-file-reader",{on:{load:e.loadStorage}})],1),e._v(" "),n("div",{staticClass:"col-6"}),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"light"},on:{click:function(t){return e.downloadStorage()}}},[n("b-icon-cloud-arrow-down"),e._v(" Daten/txt")],1)],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"light"},on:{click:function(t){return e.downloadRequirements()}}},[n("b-icon-cloud-arrow-down"),e._v(" REQs/csv")],1)],1)])},staticRenderFns:[]};var ie={name:"App",components:{TheSectionOverview:A,TheSectionDetails:G,TheSectionStorage:n("VU/8")(te,ne,!1,function(e){n("9U5W")},"data-v-2600a22c",null).exports},data:function(){return{storage:{elements:[],hierarchy:[],relations:[]},selectedElementIds:[],selectedNestedIds:[],selectedRelations:[],newRelationId:"",alertMessageDetails:""}},computed:{storageObjects:function(){return this.storage.elements},selectedConsumeRelations:function(){var e=[];if(1==this.selectedElementIds.length){var t=this.selectedNestedIds.map(function(e){return e.value});e=this.storage.relations.filter(function(e){return-1!=t.indexOf(e.startId)})}return e},selectedDependencyRelations:function(){var e=this,t=[];if(this.selectedElementIds.length<2){var n=this.selectedNestedIds.map(function(e){return e.value});t=this.storage.relations.filter(function(e){return-1!=n.indexOf(e.endId)})}else if(this.selectedNestedIds.length>1){n=this.selectedNestedIds.map(function(e){return e.value});t=this.storage.relations.filter(function(t){var i=n.indexOf(t.endId),a=n.indexOf(t.startId);return-1!=i&&-1!=a&&e.selectedNestedIds[i].parent!=e.selectedNestedIds[a].parent})}return t}},watch:{selectedConsumeRelations:{deep:!0,handler:function(){this.setSelectionRelations()}},selectedDependencyRelations:{deep:!0,handler:function(){this.setSelectionRelations()}}},methods:{setStorage:function(e){this.storage=e},changedSelectedElementIds:function(e,t){this.selectedNestedIds=e,this.selectedElementIds=t,0==this.selectedElementIds.length&&(this.selectedNestedIds=this.storage.elements.map(function(e){return{value:e.id}}))},setSelectionRelations:function(){var e=this.selectedConsumeRelations.concat(this.selectedDependencyRelations);this.selectedRelations=e.filter(function(e,t,n){return n.map(function(e){return e.id}).indexOf(e.id)===t})},deleteRelation:function(e){this.storage.relations=this.storage.relations.filter(function(t){return t.id!=e})},setRelationValue:function(e){var t=this.storage.relations.find(function(t){return t.id==e.relationId});if(-1!=["startId"].indexOf(e.prop))t[e.prop]=e.newValue,this.setTimestamp(t);else if(-1!=["endId"].indexOf(e.prop)){t[e.prop]=e.newValue;var n=this.storage.elements.find(function(t){return t.id==e.newValue});t.layer=n.type,this.setTimestamp(t)}else if(-1!=["status","solved","comment"].indexOf(e.prop)){void 0!=(i=this.getRequirementElementOfRelation(t))&&(this.setItemValue(t,e.prop,e.newValue),this.setTimestamp(t))}else if(-1!=["title"].indexOf(e.prop)){void 0==(i=this.getRequirementElementOfRelation(t))?(this.setItemValue(t,"title",e.newValue),this.setTimestamp(t)):(i.name=e.newValue,this.setTimestamp(i))}else if(-1!=["description","tablet"].indexOf(e.prop)){void 0==(i=this.getRequirementElementOfRelation(t))?(this.setItemValue(t,e.prop,e.newValue),this.setTimestamp(t)):(this.setItemValue(i,e.prop,e.newValue),this.setTimestamp(i))}else if(-1!=["commitment","benefit","sourcedetails"].indexOf(e.prop)){var i=this.getRequirementElementOfRelation(t);this.setItemValue(i,e.prop,e.newValue),this.setTimestamp(i)}},setElementValue:function(e){var t=this.storage.elements.find(function(t){return t.id==e.elementId});if(-1!=["name","type"].indexOf(e.prop))t[e.prop]=e.newValue;else if(-1!=["description","releaseStart","releaseEnd"].indexOf(e.prop))this.setItemValue(t,e.prop,e.newValue);else if(-1!=["delete"].indexOf(e.prop));else if(-1!=["functions"].indexOf(e.prop)){var n=this.storage.elements.find(function(t){return t.id==e.newValue});if("add"==e.method){var i;if(void 0==n){var a={};a.id=this.getRandomElementId(),a.name=e.newValue,a.type="Applikationsfunktion",a.values=[],this.storage.elements.push(a),this.setTimestamp(a),i=a.id}else i=n.id;void 0!=(s=t.values.find(function(t){return t.name==e.prop}))?s.value.push(i):t.values.push({name:e.prop,value:new Array(i)})}else if("remove"==e.method){var s;(s=t.values.find(function(t){return t.name==e.prop})).value=s.value.filter(function(t){return t!=e.newValue})}}this.setTimestamp(t)},getRandomElementId:function(){var e;do{e=Math.floor(1e6*Math.random()+1)}while(-1!=this.storage.elements.map(function(e){return e.id}).indexOf("ELM"+e));return"ELM"+e},getRandomRelationId:function(){var e;do{e=Math.floor(1e6*Math.random()+1)}while(-1!=this.storage.relations.map(function(e){return e.id}).indexOf("CON"+e));return"CON"+e},changeHierarchy:function(e){if("delete"==e.method){var t=this.storage.hierarchy.filter(function(t){return!(t.elemid==e.elemid&&t.subelemid==e.subelemid)});this.storage.hierarchy.length>t.length&&(this.storage.hierarchy=t)}else if("link"==e.method){var n={elemid:e.elemid,subelemid:e.subelemid};this.storage.hierarchy.push(n)}else if("add"==e.method){var i=this.getRandomElementId();if("object"==s()(e.subelemid)){var a={id:i,name:e.subelemid.name,type:e.subelemid.type,values:[]};n={elemid:e.elemid,subelemid:i}}else if("object"==s()(e.elemid))a={id:i,name:e.elemid.name,type:e.elemid.type,values:[]},n={elemid:i,subelemid:e.subelemid};this.storage.elements.push(a),this.storage.hierarchy.push(n)}},resetDetailAlert:function(){this.alertMessageDetails=""},addRelation:function(e){var t=this,n=void 0!=e.element;if(n||0!=this.selectedElementIds.length){var i=this.getRandomRelationId(),a=this.storage.elements.find(function(e){return e.id==t.selectedElementIds[0]}),s={id:i,layer:void 0!=a?a.type:"",startId:void 0!=a?this.selectedElementIds[0]:"",endId:void 0!=this.selectedElementIds[1]?this.selectedElementIds[1]:"",values:[]};if(this.setItemValue(s,"status",this.$relationStatus[0]),"Relation"==e.type)this.setItemValue(s,"title",""),this.setItemValue(s,"description",""),this.setItemValue(s,"tablet",""),this.setTimestamp(s),this.storage.relations.push(s);else if("Requirement"==e.type)if(n){if("string"==typeof e.element){s={id:i=this.getRandomRelationId(),layer:this.storage.elements.find(function(t){return t.id==e.endId}).type,startId:e.startId,endId:e.endId,values:[{name:"element",value:e.element}]};this.setTimestamp(s),this.storage.relations.push(s)}}else{var l=this.getRandomElementId(),r={id:l,name:"neues Requirement",type:"Requirement",values:[]};this.setItemValue(r,"commitment",this.$commitment[0]),this.setItemValue(r,"description",""),this.setItemValue(r,"tablet",""),this.setTimestamp(r),this.storage.elements.push(r),this.setItemValue(s,"element",l),this.setItemValue(s,"solved",""),this.setTimestamp(s),this.storage.relations.push(s)}this.newRelationId=i}else this.alertMessageDetails="Min. ein Element selektieren"},getRequirementElementOfRelation:function(e){var t=e.values.find(function(e){return"element"==e.name});if(void 0!=t)return this.storage.elements.find(function(e){return e.id==t.value})},setItemValue:function(e,t,n){var i=e.values.find(function(e){return e.name==t});void 0!=i?i.value=n:e.values.push({name:t,value:n})},getCurrentDate:function(){return new Date(Date.now()).toISOString().substr(0,10)},setTimestamp:function(e){this.setItemValue(e,"lastChange",this.getCurrentDate())},getData:function(e){this.storage=e},getObjectValueByName:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:""}}},ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid",attrs:{id:"app"}},[n("the-section-storage",{attrs:{storage:e.storage},on:{newData:e.setStorage}}),e._v(" "),n("the-section-overview",{attrs:{elements:e.storage.elements,hierarchy:e.storage.hierarchy,consumeRelations:e.selectedConsumeRelations,dependencyRelations:e.selectedDependencyRelations},on:{selectionChanged:e.changedSelectedElementIds,changeElement:e.setElementValue,changeHierarchy:e.changeHierarchy}}),e._v(" "),n("the-section-details",{attrs:{relations:e.selectedRelations,elements:e.storageObjects,"added-relation-id":e.newRelationId,"alert-message":e.alertMessageDetails},on:{changeRelation:e.setRelationValue,newRelation:e.addRelation,alertClose:e.resetDetailAlert,deleteRelation:e.deleteRelation}}),e._v(" "),n("div",{staticClass:"row"})],1)},staticRenderFns:[]};var se=n("VU/8")(ie,ae,!1,function(e){n("tnhc")},null,null).exports,le=n("Tqaz");n("Jmt5"),n("9M+g"),n("f4AQ");i.default.config.productionTip=!1,i.default.use(le.a),i.default.use(le.b),i.default.mixin({created:function(){this.$tabletComponents=[{label:"Utility",options:["Utility"]},{label:"Warranty",options:["Warranty","Verfügbarkeit","Sicherheit","Kapazität"]},{label:"Organisation",options:["Organisation","Kapazitäten","Fähigkeiten"]},{label:"Prozesse",options:["Prozesse"]},{label:"Finanzen",options:["Finanzen"]},{label:"Reporting",options:["Reporting"]},{label:"Management Systeme",options:["Management Systeme"]},{label:"Technik",options:["Technik"]},{label:"Inter-Service-Beziehungen",options:["Inter-Service-Beziehungen"]}],this.$commitment=["Vorgabe","Anforderung","Annahme"],this.$relationStatus=["aufgenommen","freigegeben","realisiert"],this.$relationTypes={norelation:{name:"no relation",fill:"#dddddd"},consume:{name:"consume",fill:"#cd5c5c"},dependency:{name:"dependency",fill:"#5c9acd"},bidirection:{name:"bi-direction",fill:"#cdb35c"},selection:{name:"selection",fill:"#eeee00"}},this.$viewLayers=[{name:"Projekt"},{name:"Funktionalität"},{name:"Release"},{name:"Solution"},{name:"Applikationsinstanz"},{name:"Netzwerk"}]}}),new i.default({el:"#app",components:{App:se},template:"<App/>"})},"PW0+":function(e,t){},QSIS:function(e,t){},RjPl:function(e,t){},XTta:function(e,t){},"Zh/s":function(e,t){},hcA5:function(e,t){},kbEv:function(e,t){},qn0X:function(e,t){},tnhc:function(e,t){},uEZm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.223f42f8846f718bef72.js.map
webpackJsonp([1],{"6b5k":function(e,t){},"7V6F":function(e,t){},"9M+g":function(e,t){},A04s:function(e,t){},C99W:function(e,t){},FMtu:function(e,t){},FxLy:function(e,t){},GQkh:function(e,t){},Jmt5:function(e,t){},N5cw:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a=n("pFYg"),r=n.n(a),s=n("fZjL"),l=n.n(s),o={name:"BasicSvgBubblePacking",props:{circleNodes:{type:Object,required:!0,default:{}},selectedKeys:{type:Array,required:!0,default:[]},consumeKeys:{type:Array,required:!0,default:[]},dependencyKeys:{type:Array,required:!0,default:[]},svgwidth:{type:Number,required:!1,default:600},svgheight:{type:Number,required:!1,default:600},paddingNodes:{type:Number,required:!1,default:3},legendNameFill:{type:Object,required:!0},keyProperty:{type:String,required:!1,default:"id"},displayProperty:{type:String,required:!1,default:"name"}},watch:{circleNodes:function(e,t){this.renderChart()},selectedKeys:function(e,t){this.fillNodes()},consumeKeys:function(e,t){this.fillNodes()},dependencyKeys:function(e,t){this.fillNodes()}},methods:{selectionChanged:function(e){this.$emit("nodeClick",e)},renderChart:function(){var e=this,t=this.keyProperty,n=this.displayProperty,i=this.svgwidth,a=this.svgheight,r=this.legendNameFill,s=d3.pack().size([i,a]).padding(this.paddingNodes),o=d3.hierarchy(this.circleNodes);o.sum(function(e){return 100}),s(o),d3.select("#svggraph").html("");var d=d3.select("#svggraph").append("svg").attr("width",i+2*this.paddingNodes).attr("height",a+2*this.paddingNodes).append("g"),c=d.selectAll("g.node").data(o.descendants()).enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"});c.append("circle").attr("class","element").attr("r",function(e){return e.r}).attr("fill",r.norelation.fill).on("click",function(n){e.selectionChanged(n.data[t])}),c.append("text").style("text-anchor","middle").attr("class","text-sm-center").attr("dy",function(e){return void 0!=e.children?-1*e.r+20:0}).text(function(e){return e.data.data[n].length>11?e.data.data[n].substring(0,parseInt(e.data.data[n].length/2)):e.data.data[n]}).append("tspan").style("text-anchor","middle").attr("class","text-sm-center").attr("dx",function(e){return-1*e.r*1.5}).attr("dy",10).text(function(e){if(e.data.data[n].length>11)return e.data.data[n].substring(parseInt(e.data.data[n].length/2))});var u=d.append("g").attr("transform",function(e){return"translate("+(i-150)+","+(a-70)+")"}).selectAll("g").data(l()(r));u.enter().append("circle").attr("class","legend").attr("cx",130).attr("cy",function(e,t){return 15*t}).attr("r",5).attr("fill",function(e,t){return r[e].fill}),u.enter().append("text").attr("dx",120).attr("dy",function(e,t){return 15*t+3}).attr("text-anchor","end").text(function(e,t){return r[e].name}),this.fillNodes()},fillNodes:function(){var e=this;switch(this.selectedKeys.length){case 0:d3.select("#svggraph").selectAll("circle.element").attr("fill",this.legendNameFill.norelation.fill);break;case 1:d3.select("#svggraph").selectAll("circle.element").attr("fill",function(t){return-1!=e.selectedKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.selection.fill:-1!=e.consumeKeys.indexOf(t.data[e.keyProperty])&&-1!=e.dependencyKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.bidirection.fill:-1!=e.consumeKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.consume.fill:-1!=e.dependencyKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.dependency.fill:e.legendNameFill.norelation.fill});break;default:d3.select("#svggraph").selectAll("circle.element").attr("fill",function(t){return-1!=e.selectedKeys.indexOf(t.data[e.keyProperty])?e.legendNameFill.selection.fill:e.legendNameFill.norelation.fill})}}}},d={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"col",attrs:{id:"svggraph"}})},staticRenderFns:[]};var c=n("VU/8")(o,d,!1,function(e){n("uEZm")},null,null).exports,u={props:{consumeRelations:{type:Array,required:!0,default:[]},dependencyRelations:{type:Array,required:!0,default:[]},show:{type:Boolean,required:!0,default:!1},elements:{type:Array,required:!0,default:[]}},created:function(){this.layerShowSwitch=!0,this.tableShowSwitch=!1},data:function(){return{layerShowSwitch:Boolean,tableShowSwitch:Boolean}},computed:{tabletOptions:function(){var e=[];return this.$tabletComponents.forEach(function(t){t.options.forEach(function(t){e.push(t)})}),e},tabletConsumeRelationSum:function(){var e=[],t=[];this.consumeRelations.forEach(function(e){var n=e.values.find(function(e){return"element"==e.name});void 0!=n&&t.push(n.value)});var n=this.elements.filter(function(e){if(-1!=t.indexOf(e.id)&&void 0!=e.values.find(function(e){return"tablet"==e.name}))return!0;return!1});return this.tabletOptions.forEach(function(t,i){e[i]=n.filter(function(e){return e.values.find(function(e){return"tablet"==e.name}).value==t}).length}),e},tabletDependencyRelationSum:function(){var e=[],t=[];this.dependencyRelations.forEach(function(e){var n=e.values.find(function(e){return"element"==e.name});void 0!=n&&t.push(n.value)});var n=this.elements.filter(function(e){if(-1!=t.indexOf(e.id)&&void 0!=e.values.find(function(e){return"tablet"==e.name}))return!0;return!1});return this.tabletOptions.forEach(function(t,i){e[i]=n.filter(function(e){return e.values.find(function(e){return"tablet"==e.name}).value==t}).length}),e},layerConsumeRelationSum:function(){var e=this,t=[];return this.$viewLayers.forEach(function(n,i){t[i]=e.consumeRelations.filter(function(e){return e.layer==n.name}).length}),t},layerDependencyRelationSum:function(){var e=this,t=[];return this.$viewLayers.forEach(function(n,i){t[i]=e.dependencyRelations.filter(function(e){return e.layer==n.name}).length}),t}},methods:{}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("b-card",{staticClass:"p-3 mb-3",attrs:{title:"Beziehungen"}},[n("b-card-text",[n("button",{class:{btn:!0,"btn-sm":!0,"mt-3":!0,"btn-secondary":e.layerShowSwitch,"btn-outline-dark":!e.layerShowSwitch},attrs:{type:"button"},on:{click:function(t){e.layerShowSwitch=!e.layerShowSwitch}}},[e._v("Analyse Ebenen")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:e.layerShowSwitch,expression:"layerShowSwitch"}],staticClass:"table table-sm table-borderless"},[n("tr",[n("td"),e._v(" "),n("td",[e._v("consume")]),e._v(" "),n("td",[e._v("dependency")])]),e._v(" "),e._l(e.$viewLayers,function(t,i){return n("tr",{key:t.name},[n("th",[e._v(e._s(t.name))]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.layerConsumeRelationSum[i]))])]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.layerDependencyRelationSum[i]))])])])})],2),e._v(" "),n("button",{class:{btn:!0,"btn-sm":!0,"mt-3":!0,"btn-secondary":e.tableShowSwitch,"btn-outline-dark":!e.tableShowSwitch},attrs:{type:"button"},on:{click:function(t){e.tableShowSwitch=!e.tableShowSwitch}}},[e._v("Analyse Tablet")]),e._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:e.tableShowSwitch,expression:"tableShowSwitch"}],staticClass:"table table-sm table-borderless"},[n("tr",[n("td"),e._v(" "),n("td",[e._v("consume")]),e._v(" "),n("td",[e._v("dependency")])]),e._v(" "),e._l(e.tabletOptions,function(t,i){return n("tr",{key:t},[n("th",[e._v(e._s(t))]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.tabletConsumeRelationSum[i]))])]),e._v(" "),n("td",[n("span",{staticClass:"badge bg-primary text-white "},[e._v(e._s(e.tabletDependencyRelationSum[i]))])])])})],2)])],1):e._e()},staticRenderFns:[]};var h=n("VU/8")(u,m,!1,function(e){n("ds9d")},"data-v-2e29f78d",null).exports,p={props:{itemId:{type:String,required:!0}},data:function(){return{showDelButton:!1}},methods:{unlinkItem:function(){this.$emit("unlinkItem",this.itemId)}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showDelButton,expression:"!showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-iconstack",[n("b-icon",{attrs:{stacked:"",icon:"link"}}),e._v(" "),n("b-icon",{attrs:{stacked:"",icon:"slash",scale:"1.75"}})],1)],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-arrow-left-short")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.unlinkItem()}}},[n("b-iconstack",[n("b-icon",{attrs:{stacked:"",icon:"link"}}),e._v(" "),n("b-icon",{attrs:{stacked:"",icon:"slash",scale:"1.75"}})],1),e._v(" "),n("b-icon-check",{staticClass:"rounded white bg-danger",attrs:{variant:"white"}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(p,f,!1,function(e){n("Zh/s")},"data-v-2875e88a",null).exports,b={props:{lowerElements:{type:Array,required:!0}},components:{MyButtonUnlink:v},methods:{changeElement:function(e,t,n){this.$emit("changeElement",e,t,n)},deleteHierarchy:function(e){this.$emit("deleteHierarchy",e)},showElementDetails:function(e){this.$emit("showElementDetails",e)}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.lowerElements,function(t){return n("div",{key:t.id,staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("b-card",{staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"elem.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"elem.name"}})],1)]),e._v(" "),"Release"==t.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseStart",t.releaseStart)}},model:{value:t.releaseStart,callback:function(n){e.$set(t,"releaseStart",n)},expression:"elem.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseEnd",t.releaseEnd)}},model:{value:t.releaseEnd,callback:function(n){e.$set(t,"releaseEnd",n)},expression:"elem.releaseEnd"}})],1)]):e._e()])],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetails(t.id)}}},[n("b-icon-gear")],1),e._v(" "),n("my-button-unlink",{attrs:{"item-id":t.id},on:{unlinkItem:e.deleteHierarchy}})],1)])}),0)},staticRenderFns:[]};var g=n("VU/8")(b,y,!1,function(e){n("hcA5")},"data-v-1b1a7286",null).exports,w={props:{siblingElements:{type:Array,required:!0}},methods:{changeElement:function(e,t,n){this.$emit("changeElement",e,t,n)},showElementDetails:function(e){this.$emit("showElementDetails",e)}}},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.siblingElements,function(t){return n("div",{key:t.id,staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("b-card",{staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"elem.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"elem.name"}})],1)]),e._v(" "),"Release"==t.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseStart",t.releaseStart)}},model:{value:t.releaseStart,callback:function(n){e.$set(t,"releaseStart",n)},expression:"elem.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(n){return e.changeElement(t.id,"releaseEnd",t.releaseEnd)}},model:{value:t.releaseEnd,callback:function(n){e.$set(t,"releaseEnd",n)},expression:"elem.releaseEnd"}})],1)]):e._e()])],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetails(t.id)}}},[n("b-icon-gear")],1)],1)])}),0)},staticRenderFns:[]};var E=n("VU/8")(w,I,!1,function(e){n("XTta")},"data-v-7dcd56ca",null).exports,_={props:{ddItems:{type:Array,required:!0},buttonText:{type:String,required:!1,default:"Item"},allowNewValue:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{showAddItem:!1,newItem:"",showLinkItem:!1,linkedItem:"",labelItem:""}},computed:{ddLabel:function(){return this.ddItems.length>0&&void 0!=this.ddItems[0].label?this.ddItems.map(function(e){return e.label}):[""]},ddLabelItems:function(){var e=this;if(this.ddLabel.length>0){var t=this.ddItems.find(function(t){return t.label==e.labelItem});if(void 0!=t)return t.options}return this.ddItems}},methods:{addItem:function(){this.$emit("addItem",this.newItem),this.showAddItem=!1,this.newItem=""},linkItem:function(){this.$emit("linkItem",this.linkedItem),this.showLinkItem=!1}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"mt-2"},[n("b-col",{directives:[{name:"show",rawName:"v-show",value:e.allowNewValue||e.showAddItem||e.showLinkItem,expression:"allowNewValue || (showAddItem || showLinkItem)"}],attrs:{cols:"2"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.allowNewValue&&!e.showAddItem&&!e.showLinkItem,expression:"allowNewValue && (!showAddItem && !showLinkItem)"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showAddItem=!e.showAddItem}}},[n("b-icon-plus"),e._v(" "+e._s(e.buttonText))],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem||e.showLinkItem,expression:"showAddItem || showLinkItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showAddItem=!1,e.showLinkItem=!1}}},[n("b-icon-arrow-left")],1)],1),e._v(" "),0==e.ddLabel.length?n("b-col",{attrs:{cols:"5"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showLinkItem&&!e.showAddItem,expression:"!showLinkItem && !showAddItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showLinkItem=!e.showLinkItem}}},[n("b-icon-link"),e._v(" "+e._s(e.buttonText))],1),e._v(" "),n("b-form-select",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{options:e.ddLabelItems},model:{value:e.linkedItem,callback:function(t){e.linkedItem=t},expression:"linkedItem"}}),e._v(" "),n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem,expression:"showAddItem"}],attrs:{type:"text"},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}})],1):e._e(),e._v(" "),e.ddLabel.length>0?n("b-col",{attrs:{cols:"3"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showLinkItem&&!e.showAddItem,expression:"!showLinkItem && !showAddItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){e.showLinkItem=!e.showLinkItem}}},[n("b-icon-link"),e._v(" "+e._s(e.buttonText))],1),e._v(" "),n("b-form-select",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{options:e.ddLabel},model:{value:e.labelItem,callback:function(t){e.labelItem=t},expression:"labelItem"}}),e._v(" "),n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem,expression:"showAddItem"}],attrs:{type:"text"},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}})],1):e._e(),e._v(" "),e.ddLabel.length>0?n("b-col",{attrs:{cols:"5"}},[n("b-form-select",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{options:e.ddLabelItems},model:{value:e.linkedItem,callback:function(t){e.linkedItem=t},expression:"linkedItem"}})],1):e._e(),e._v(" "),n("b-col",{attrs:{cols:"1"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddItem,expression:"showAddItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){return e.addItem()}}},[n("b-icon-plus")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showLinkItem,expression:"showLinkItem"}],attrs:{variant:"outline-dark"},on:{click:function(t){return e.linkItem()}}},[n("b-icon-link")],1)],1)],1)},staticRenderFns:[]};var k=n("VU/8")(_,R,!1,function(e){n("GQkh")},"data-v-841f0138",null).exports,C={props:{functionId:{type:String,required:!0},elements:{type:Array,required:!0},currentDisplayedId:{type:String,required:!1,default:""}},components:{MyButtonUnlink:v},data:function(){return{showEdit:!1,functionName:""}},computed:{ddFunctions:function(){return this.elements.filter(function(e){return"Applikationsfunktion"==e.type}).map(function(e){return{value:e.id,text:e.name}})},applicationsWithFunction:function(){var e=this,t=[];return this.elements.forEach(function(n){n.id!=e.currentDisplayedId&&(-1!=e.getElementValueArray(n,"functions").indexOf(e.functionId)&&t.push({id:n.id,name:n.name}))}),t}},mounted:function(){var e=this;this.functionName=this.elements.find(function(t){return t.id==e.functionId}).name},watch:{functionId:function(e){this.functionName=this.elements.find(function(t){return t.id==e}).name}},methods:{removeFunctionRelation:function(){var e={};e.elementId=this.currentDisplayedId,e.prop="functions",e.newValue=this.functionId,e.method="remove",this.$emit("changeElement",e)},changeFunctionName:function(){var e={};e.elementId=this.functionId,e.prop="name",e.newValue=this.functionName,this.$emit("changeElement",e),this.showEdit=!this.showEdit},showElementDetail:function(e){this.$emit("showElement",e)},getElementValueArray:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:[]}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-1"},[n("div",{staticClass:"container-fluid mb-2"},[n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-2"}),e._v(" "),n("div",{staticClass:"col-8"},[n("b-form-input",{attrs:{type:"text",disabled:!e.showEdit},model:{value:e.functionName,callback:function(t){e.functionName=t},expression:"functionName"}})],1),e._v(" "),n("div",{staticClass:"col-2"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showEdit,expression:"!showEdit"}],staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-gear")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.changeFunctionName()}}},[n("b-icon-check")],1),e._v(" "),n("my-button-unlink",{attrs:{"item-id":this.currentDisplayedId},on:{unlinkItem:function(t){return e.removeFunctionRelation()}}})],1)]),e._v(" "),e._l(e.applicationsWithFunction,function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],key:t.id,staticClass:"row mt-1"},[e._m(0,!0),e._v(" "),n("div",{staticClass:"col-6"},[n("b-form-input",{attrs:{type:"text",value:t.name,disabled:""}})],1),e._v(" "),n("div",{staticClass:"col-2"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showElementDetail(t.id)}}},[n("b-icon-gear")],1)],1)])})],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-4"},[t("small",[this._v("auch bereitgestellt durch")])])}]};var x=n("VU/8")(C,q,!1,function(e){n("kbEv")},"data-v-28d24a84",null).exports,N={props:{show:{type:Boolean,required:!0,default:!1},elementId:{type:String,required:!0,default:""},elements:{type:Array,required:!0,default:function(){return[]}},hierarchy:{type:Array,required:!0,default:function(){return[]}}},components:{MyFunctionSelectOption:x,MyElementModalChilds:g,MyModalRowAddLink:k,MyElementModalSiblings:E,MyButtonUnlink:v},data:function(){return{showComponentModel:this.show,displayedElementId:"",shownElementIds:[],newApplicationFunction:"",selectedApplicationFunction:"",showAddChild:!1,showLinkChild:!1,linkedChild:"",newChild:""}},computed:{displayedElement:function(){var e=this,t={},n=this.elements.find(function(t){return t.id==e.displayedElementId});return 0==this.displayedElementId.length||void 0==n?t:(t.id=n.id,t.name=n.name,t.type=n.type,t.description=this.getValue(n,"description"),"Release"==t.type?(t.releaseStart=this.getValue(n,"releaseStart"),t.releaseEnd=this.getValue(n,"releaseEnd")):"Serviceinstanz"==t.type&&(t.functions=this.getValue(n,"functions")),t)},upperElement:function(){var e=this,t={},n=this.hierarchy.find(function(t){return t.subelemid==e.displayedElementId});if(0==this.displayedElementId.length||void 0==n)return t;var i=this.elements.find(function(e){return e.id==n.elemid});return t.id=i.id,t.name=i.name,t.type=i.type,t.description=this.getValue(i,"description"),t},ddUpperLayerElements:function(){var e=this;return this.elements.filter(function(t){return t.type==e.upperLayer()}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},siblingElements:function(){var e=this,t=[],n=this.hierarchy.filter(function(t){return t.elemid==e.upperElement.id&&t.subelemid!=e.displayedElementId});return 0==this.displayedElementId.length||0==n.length?t:(n.forEach(function(n){var i=e.elements.find(function(e){return e.id==n.subelemid}),a={};a.id=i.id,a.name=i.name,a.type=i.type,"Release"==a.type&&(a.releaseStart=e.getValue(i,"releaseStart"),a.releaseEnd=e.getValue(i,"releaseEnd")),t.push(a)}),t)},ddSiblingsLayerElements:function(){var e=this,t=this.siblingElements.map(function(e){return e.id}),n=this.hierarchy.map(function(e){return e.subelemid});return this.elements.filter(function(i){return i.type==e.displayedElement.type&&-1==t.indexOf(i.id)&&-1==n.indexOf(i.id)}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},lowerElements:function(){var e=this,t=[],n=this.hierarchy.filter(function(t){return t.elemid==e.displayedElementId});return 0==this.displayedElementId.length||0==n.length?t:(n.forEach(function(n){var i=e.elements.find(function(e){return e.id==n.subelemid}),a={};a.id=i.id,a.name=i.name,a.type=i.type,"Release"==a.type&&(a.releaseStart=e.getValue(i,"releaseStart"),a.releaseEnd=e.getValue(i,"releaseEnd")),t.push(a)}),t)},releaseElement:function(){for(var e,t=this,n=["Projekt","Funktionalität","Release"],i={},a=this.elements.find(function(e){return e.id==t.displayedElementId}),r=-1!=n.indexOf(a.type);-1==n.indexOf(a.type)&&!r;)void 0==(e=this.hierarchy.find(function(e){return e.subelemid==a.id}))?r=!0:a=this.elements.find(function(t){return t.id==e.elemid});if(0!=this.displayedElementId.length&&!r)return i.id=a.id,i.name=a.name,i.releaseStart=this.getValue(a,"releaseStart"),i.releaseEnd=this.getValue(a,"releaseEnd"),i},ddFunctions:function(){return this.elements.filter(function(e){return"Applikationsfunktion"==e.type}).map(function(e){return{value:e.id,text:e.name}})},lowerLayer:function(){var e=this.ddLayer(),t=e.indexOf(this.displayedElement.type);return t<e.length-1?e[t+1]:""},ddLowerLayerElements:function(){var e=this,t=this.lowerElements.map(function(e){return e.id}),n=this.hierarchy.map(function(e){return e.subelemid});return this.elements.filter(function(i){return i.type==e.lowerLayer&&-1==t.indexOf(i.id)&&-1==n.indexOf(i.id)}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})}},watch:{show:function(e){this.showComponentModel=e,e&&(this.displayedElementId=this.elementId)}},methods:{hideModal:function(){this.shownElementIds=[],this.$emit("closeModal")},changeElement:function(e,t,n){var i={};i.elementId=e,i.prop=t,i.newValue=n,this.emitChangeElement(i)},emitChangeElement:function(e){this.$emit("changeElement",e)},removeParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid=e,t.method="delete",this.$emit("changeHierarchy",t)},removeChild:function(e){var t={};t.subelemid=e,t.elemid=this.displayedElementId,t.method="delete",this.$emit("changeHierarchy",t)},addApplicationFunction:function(e){if(e.length>0){var t={};t.elementId=this.displayedElementId,t.prop="functions",t.newValue=e,t.method="add",this.$emit("changeElement",t),this.newApplicationFunction="",this.applicationFunction=""}},linkChild:function(e){var t={};t.subelemid=e,t.elemid=this.displayedElementId,t.method="link",this.$emit("changeHierarchy",t)},addChild:function(e){var t={};t.subelemid={name:e,type:this.lowerLayer},t.elemid=this.displayedElementId,t.method="add",this.$emit("changeHierarchy",t)},linkSibling:function(e){var t={};t.subelemid=e,t.elemid=this.upperElement.id,t.method="link",this.$emit("changeHierarchy",t)},addSibling:function(e){var t={};t.subelemid={name:e,type:this.displayedElement.type},t.elemid=this.upperElement.id,t.method="add",this.$emit("changeHierarchy",t)},linkParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid=e,t.method="link",this.$emit("changeHierarchy",t)},addParent:function(e){var t={};t.subelemid=this.displayedElementId,t.elemid={name:e,type:this.upperLayer()},t.method="add",this.$emit("changeHierarchy",t)},getValue:function(e,t){if(void 0!=e){var n=e.values.find(function(e){return e.name==t});if(void 0!=n)return n.value}return""},getElementName:function(e){return this.elements.find(function(t){return t.id==e}).name},ddLayer:function(){return this.$viewLayers.map(function(e){return e.name})},upperLayer:function(){var e=this.ddLayer(),t=e.indexOf(this.displayedElement.type);return t>0?e[t-1]:""},ddElements:function(e){return this.elements.filter(function(t){return t.type==e}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})},showElementDetails:function(e){this.shownElementIds.push(this.displayedElementId),this.displayedElementId=e},showLastElementDetails:function(){this.displayedElementId=this.shownElementIds.pop()}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{scrollable:"",size:"xl","ok-only":"",title:"Element Details"},on:{hide:e.hideModal,blur:e.hideModal,close:e.hideModal},model:{value:e.showComponentModel,callback:function(t){e.showComponentModel=t},expression:"showComponentModel"}},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.shownElementIds.length>0,expression:"shownElementIds.length > 0"}],staticClass:"m-1 mb-2",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showLastElementDetails()}}},[n("b-icon-arrow-left")],1),e._v(" "),e.upperLayer().length>0?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.upper-info",modifiers:{"upper-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("strong",[e._v("Übergeordnete Werte")])])],1),e._v(" "),n("b-collapse",{attrs:{id:"upper-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[void 0!=e.releaseElement?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("i",[e._v(e._s(e.releaseElement.name)+" (Ebene Release)")])])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date",disabled:""},model:{value:e.releaseElement.releaseStart,callback:function(t){e.$set(e.releaseElement,"releaseStart",t)},expression:"releaseElement.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date",disabled:""},model:{value:e.releaseElement.releaseEnd,callback:function(t){e.$set(e.releaseElement,"releaseEnd",t)},expression:"releaseElement.releaseEnd"}})],1)])]),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-3",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showElementDetails(e.releaseElement.id)}}},[n("b-icon-gear")],1)],1)])]):e._e()])])],1)],1):e._e(),e._v(" "),e.upperLayer().length>0?n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.upper-info",modifiers:{"upper-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("span",[n("strong",[e._v("Eltern Elemente")]),e._v(" :: Ebene "+e._s(e.upperLayer())+" "),n("b-badge",{staticClass:"bg-secondary",attrs:{pill:""}},[e._v(e._s(void 0!=e.upperElement.id?"set":""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"upper-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-modal-row-add-link",{directives:[{name:"show",rawName:"v-show",value:void 0==e.upperElement.id,expression:"upperElement.id == undefined"}],attrs:{ddItems:e.ddUpperLayerElements,buttonText:"Element"},on:{addItem:e.addParent,linkItem:e.linkParent}}),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-11"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.id,callback:function(t){e.$set(e.upperElement,"id",t)},expression:"upperElement.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.name,callback:function(t){e.$set(e.upperElement,"name",t)},expression:"upperElement.name"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Beschreibung:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.upperElement.description,callback:function(t){e.$set(e.upperElement,"description",t)},expression:"upperElement.description"}})],1)])]),e._v(" "),n("div",{staticClass:"col-1"},[void 0!=e.upperElement.id?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showElementDetails(e.upperElement.id)}}},[n("b-icon-gear")],1):e._e(),e._v(" "),void 0!=e.upperElement.id?n("my-button-unlink",{attrs:{"item-id":e.upperElement.id},on:{unlinkItem:e.removeParent}}):e._e()],1)])],1)])],1)],1):e._e(),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.general-info",modifiers:{"general-info":!0}}],attrs:{block:"",variant:"primary"}},[n("strong",[e._v("Allgemein")])])],1),e._v(" "),n("b-collapse",{attrs:{id:"general-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Ebene:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.ddLayer(),disabled:!0},model:{value:e.displayedElement.type,callback:function(t){e.$set(e.displayedElement,"type",t)},expression:"displayedElement.type"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Id:")]),e._v(" "),n("div",{staticClass:"col-2"},[n("b-form-input",{attrs:{type:"text",disabled:""},model:{value:e.displayedElement.id,callback:function(t){e.$set(e.displayedElement,"id",t)},expression:"displayedElement.id"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Name:")]),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"name",e.displayedElement.name)}},model:{value:e.displayedElement.name,callback:function(t){e.$set(e.displayedElement,"name",t)},expression:"displayedElement.name"}})],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v("Beschreibung:")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-textarea",{attrs:{rows:"3","max-rows":"6"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"description",e.displayedElement.description)}},model:{value:e.displayedElement.description,callback:function(t){e.$set(e.displayedElement,"description",t)},expression:"displayedElement.description"}})],1)]),e._v(" "),"Release"==e.displayedElement.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-1"},[e._v("Start")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"releaseStart",e.displayedElement.releaseStart)}},model:{value:e.displayedElement.releaseStart,callback:function(t){e.$set(e.displayedElement,"releaseStart",t)},expression:"displayedElement.releaseStart"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[e._v("Ende")]),e._v(" "),n("div",{staticClass:"col-5"},[n("b-form-input",{attrs:{type:"date"},on:{blur:function(t){return e.changeElement(e.displayedElement.id,"releaseEnd",e.displayedElement.releaseEnd)}},model:{value:e.displayedElement.releaseEnd,callback:function(t){e.$set(e.displayedElement,"releaseEnd",t)},expression:"displayedElement.releaseEnd"}})],1)]):e._e(),e._v(" "),"Serviceinstanz"==e.displayedElement.type?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("Funktionen")])]),e._v(" "),e._l(e.displayedElement.functions,function(t){return n("my-function-select-option",{key:t.id,attrs:{functionId:t,elements:e.elements,currentDisplayedId:e.displayedElement.id},on:{showElement:e.showElementDetails,changeElement:e.emitChangeElement}})}),e._v(" "),n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col-4"}),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-select",{attrs:{options:e.ddFunctions},model:{value:e.selectedApplicationFunction,callback:function(t){e.selectedApplicationFunction=t},expression:"selectedApplicationFunction"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.addApplicationFunction(e.selectedApplicationFunction)}}},[n("b-icon-link")],1)],1)]),e._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-4"}),e._v(" "),n("div",{staticClass:"col-7"},[n("b-form-input",{attrs:{type:"text",placeholder:"Neue Applikationsfunktion"},model:{value:e.newApplicationFunction,callback:function(t){e.newApplicationFunction=t},expression:"newApplicationFunction"}})],1),e._v(" "),n("div",{staticClass:"col-1"},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.addApplicationFunction(e.newApplicationFunction)}}},[n("b-icon-plus")],1)],1)])],2)]):e._e()])])],1)],1),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sibling-info",modifiers:{"sibling-info":!0}}],attrs:{block:"",variant:"outline-primary"}},[n("span",[n("strong",[e._v("Geschwister Elemente")]),e._v(" :: Ebene "+e._s(e.displayedElement.type)+" "),n("b-badge",{staticClass:"bg-primary",attrs:{pill:""}},[e._v(e._s(e.siblingElements.length>0?e.siblingElements.length:""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"sibling-info"}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-modal-row-add-link",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.upperElement.id,expression:"upperElement.id != undefined"}],attrs:{ddItems:e.ddSiblingsLayerElements,buttonText:"Element"},on:{addItem:e.addSibling,linkItem:e.linkSibling}}),e._v(" "),n("my-element-modal-siblings",{attrs:{siblingElements:e.siblingElements},on:{changeElement:e.changeElement,showElementDetails:e.showElementDetails}})],1)])],1)],1),e._v(" "),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.lower-info",modifiers:{"lower-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("span",[n("strong",[e._v("Kinder Elemente")]),e._v(" :: Ebene "+e._s(e.lowerLayer)+" "),n("b-badge",{staticClass:"bg-secondary",attrs:{pill:""}},[e._v(e._s(e.lowerElements.length>0?e.lowerElements.length:""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"lower-info",visible:""}},[n("b-card-body",[n("div",{staticClass:"container-fluid"},[n("my-modal-row-add-link",{attrs:{ddItems:e.ddLowerLayerElements,buttonText:"Element"},on:{addItem:e.addChild,linkItem:e.linkChild}}),e._v(" "),n("my-element-modal-childs",{attrs:{lowerElements:e.lowerElements},on:{changeElement:e.changeElement,deleteHierarchy:e.removeChild,showElementDetails:e.showElementDetails}})],1)])],1)],1)],1)},staticRenderFns:[]};var L=n("VU/8")(N,S,!1,function(e){n("A04s")},"data-v-6f051c9c",null).exports,$={props:{consumeRelations:{type:Array,required:!0,default:function(){return[]}},dependencyRelations:{type:Array,required:!0,default:function(){return[]}},elements:{type:Array,required:!0,default:function(){return[]}},hierarchy:{type:Array,required:!0,default:function(){return[]}},newElementId:{type:String,required:!1,default:""}},components:{BasicSvgBubblePacking:c,TheOverviewRelations:h,MyElementModal:L},data:function(){return{graphWidth:600,graphHeight:600,selectedGrouping:"",selectedNodeLayer:"",selectedNodeIds:[],showElementModal:!1,myUrl:"#",myfilename:"",modalElementId:""}},created:function(){this.graphWidth=window.innerHeight-150,this.graphHeight=window.innerHeight-150,this.selectedGrouping=this.$viewLayers[0].name,this.selectedNodeLayer=this.$viewLayers[0].name},computed:{ddLayers:function(){return this.$viewLayers.map(function(e){return e.name})},graphNodes:function(){return this.generateSvgNodes()},selectedNestedIds:function(){var e=this,t=[];return this.selectedNodeIds.forEach(function(n){t=t.concat(e.getNestedIds(n,0),{value:n,depth:0,parent:n})}),t},selectedConsumeNodes:function(){var e=this;if(1==this.selectedNodeIds.length){var t=this.consumeRelations.map(function(t){var n=e.selectedNestedIds[e.selectedNestedIds.map(function(e){return e.value}).indexOf(t.startId)];return{value:t.endId,depth:n.depth}});return this.upScaleNodes(t)}return[]},selectedDependencyNodes:function(){var e=this,t=this.dependencyRelations.map(function(t){var n=e.selectedNestedIds[e.selectedNestedIds.map(function(e){return e.value}).indexOf(t.endId)];return{value:t.startId,depth:void 0!=n?n.depth:-1}});return this.upScaleNodes(t)}},watch:{selectedNestedIds:function(e){this.$emit("selectionChanged",e,this.selectedNodeIds)},selectedGrouping:function(){this.selectedNodeIds=[]},selectedNodeLayer:function(){this.selectedNodeIds=[]},newElementId:function(e){e.length>0&&this.showElementDetails(e)}},methods:{emitDownloadRequirements:function(){this.$emit("autoDownloadRequirements")},emitLoadStorage:function(){this.$emit("loadStorage")},changeSelectedElementIds:function(e){-1==this.selectedNodeIds.indexOf(e)?this.selectedNodeIds.push(e):this.selectedNodeIds.splice(this.selectedNodeIds.indexOf(e),1)},upScaleNodes:function(e){for(var t=[],n=e.length,i=0;i<n;i++){for(var a=e[i],r=a.depth,s=a.value,l=a.value;r>0;)void 0!=(l=this.hierarchy.find(function(e){return e.subelemid==s}))?(s=l.elemid,r--):r=0;-1==t.indexOf(s)&&t.push(s)}return t},getNestedIds:function(e,t){var n=this.hierarchy.filter(function(t){return t.elemid==e}),i=n.length,a=[];if(i>0){a=n.map(function(e){return{value:e.subelemid,depth:t+1}});for(var r=0;r<i;r++)a=a.concat(this.getNestedIds(n[r].subelemid,t+1))}return 0==t?a.map(function(t){return t.parent=e,t}):a},getNestedLayerNodes:function(e,t){for(var n=this,i=this.hierarchy.filter(function(t){return t.elemid==e}).map(function(e){return n.elements.find(function(t){return t.id==e.subelemid})}),a=[],r=0;r<i.length;r++)i[r].type==t?a.push({id:i[r].id,name:i[r].name}):a=a.concat(this.getNestedLayerNodes(i[r].id,t));return a},generateSvgNodes:function(){var e=this;if(void 0==this.elements)return[];this.selectedNodeLayer;var t=[];switch(this.selectedNodeLayer){case this.$viewLayers[6].name:case this.$viewLayers[5].name:case this.$viewLayers[4].name:case this.$viewLayers[3].name:case this.$viewLayers[2].name:case this.$viewLayers[1].name:var n=[],i=[];this.elements.filter(function(t){return t.type==e.selectedGrouping}).forEach(function(a){(n=e.getNestedLayerNodes(a.id,e.selectedNodeLayer)).length>0&&(t=t.concat(n.map(function(e){return{id:e.id,name:e.name,parentNodeId:a.id}})),i.push(a.id))}),i.forEach(function(n){var i=e.elements.find(function(e){return e.id==n}).name;t.push({id:n,name:i,parentNodeId:"ELM0"})});var a=this.elements.filter(function(t){return t.type==e.selectedNodeLayer}).filter(function(e){return-1==t.map(function(e){return e.id}).indexOf(e.id)});(t=t.concat(a.map(function(e){return{id:e.id,name:e.name,parentNodeId:"ELMPRJ0"}}))).push({id:"ELMPRJ0",name:"No Project",parentNodeId:"ELM0"});break;default:case this.$viewLayers[0].name:t=this.elements.filter(function(t){return t.type==e.$viewLayers[0].name}).map(function(e){return{id:e.id,name:e.name,parentNodeId:"ELM0"}})}return(t=t.filter(function(e,t,n){return n.map(function(e){return e.id}).indexOf(e.id)===t})).push({id:"ELM0",name:"",parentNodeId:""}),d3.stratify().id(function(e){return e.id}).parentId(function(e){return e.parentNodeId})(t)},changeElement:function(e){this.$emit("changeElement",e)},changeHierarchy:function(e){this.$emit("changeHierarchy",e)},showElementDetails:function(e){this.modalElementId=e,this.showElementModal=!0},hideElementDetails:function(){this.showElementModal=!1},addElement:function(e){this.$emit("addElement",e)}}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-container",{staticClass:"m-2",attrs:{fluid:""}},[n("b-row",{staticClass:"mb-4"},[n("b-col",{staticClass:"form-check form-check-inline"},[n("small",{staticClass:"form-text text-muted"},[e._v("\n                    Interaktives Diagramm:\n                    "),n("p",[e._v("\n                        Einfach-"),n("b-icon-mouse"),e._v("\n                        :: Eingrenzung der Darstellung und Tabelle auf Selektion\n                        (Mehrfachselektion möglich)\n                    ")],1)])])],1),e._v(" "),n("b-row",{staticClass:"w-75 mb-4"},[n("basic-svg-bubble-packing",{attrs:{"circle-nodes":e.graphNodes,"selected-keys":e.selectedNodeIds,"consume-keys":e.selectedConsumeNodes,"dependency-keys":e.selectedDependencyNodes,svgwidth:e.graphWidth,svgheight:e.graphHeight,"padding-nodes":3,"legend-name-fill":e.$relationTypes,"key-property":"id","display-property":"name"},on:{nodeClick:e.changeSelectedElementIds}}),e._v(" "),n("b-col",{attrs:{sm:""}},[n("b-card",{staticClass:"p-3 mb-3",attrs:{title:"Diagramm"}},[n("b-card-text",[n("small",[e._v("Gruppierung:")]),e._v(" "),n("b-form-select",{attrs:{options:e.ddLayers},model:{value:e.selectedGrouping,callback:function(t){e.selectedGrouping=t},expression:"selectedGrouping"}})],1),e._v(" "),n("b-card-text",[n("small",[e._v("Ebene:")]),e._v(" "),n("b-form-select",{attrs:{options:e.ddLayers},model:{value:e.selectedNodeLayer,callback:function(t){e.selectedNodeLayer=t},expression:"selectedNodeLayer"}})],1),e._v(" "),n("b-card-text",[e._v("\n                        Schriftgröße | View auf Selektion eingrenzen (keine Selektion >\n                        wieder alle anzeigen)\n                    ")])],1),e._v(" "),n("b-card",{staticClass:"p-3 mb-3",attrs:{title:"Elemente"}},[1==e.selectedNodeIds.length?n("b-card-text",[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.showElementDetails(e.selectedNodeIds[0])}}},[e._v("Element-Details")])],1):e._e(),e._v(" "),n("b-card-text",[n("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(t){return e.addElement(e.selectedNodeLayer)}}},[e._v(e._s(e.selectedNodeLayer)+" hinzufügen")])],1),e._v(" "),n("my-element-modal",{attrs:{show:e.showElementModal,elementId:e.modalElementId,elements:e.elements,hierarchy:e.hierarchy},on:{closeModal:e.hideElementDetails,changeElement:e.changeElement,changeHierarchy:e.changeHierarchy}})],1),e._v(" "),n("the-overview-relations",{attrs:{consumeRelations:e.consumeRelations,dependencyRelations:e.dependencyRelations,show:e.selectedNodeIds.length>0,elements:e.elements}})],1)],1)],1)],1)},staticRenderFns:[]};var A=n("VU/8")($,M,!1,function(e){n("eQfS")},"data-v-393cf182",null).exports,O={props:{itemId:{type:String,required:!0}},data:function(){return{showDelButton:!1}},methods:{deleteItem:function(){this.$emit("deleteItem",this.itemId)}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-1"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.showDelButton,expression:"!showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-trash")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showDelButton=!e.showDelButton}}},[n("b-icon-arrow-left-short")],1),e._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelButton,expression:"showDelButton"}],attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.deleteItem()}}},[n("b-icon-trash"),e._v(" "),n("b-icon-check",{staticClass:"rounded white bg-danger",attrs:{variant:"white"}})],1)],1)},staticRenderFns:[]};var j=n("VU/8")(O,V,!1,function(e){n("RjPl")},"data-v-e3ee71e4",null).exports,D={props:{elements:{type:Array,required:!1,default:function(){return[]}},relations:{type:Array,required:!1,default:function(){return[]}},selectedItemId:{type:String,required:!0},isEditable:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{showEdit:!1,elementId:"",elementName:"",elementLayer:""}},computed:{ddItems:function(){var e=this,t=[{label:"keine Auswahl",options:[""]}];if(this.elements.length>0){var n={label:"Elements",options:[]};n.options=this.elements.filter(function(t){return t.type==e.elementLayer}).map(function(e){return{value:e.id,text:e.name+" ("+e.id+")"}}).sort(function(e,t){return e.text>t.text?1:-1}),t.push(n)}if(this.relations.length>0){var i={label:"Beziehungen",options:[]};i.options=this.relations.filter(function(t){return t.layer==e.elementLayer}).map(function(e){return{value:e.id,text:"("+e.startId+" > "+e.endId+")"}}).sort(function(e,t){return e.text>t.text?1:-1}),t.push(i)}return t},formInputName:function(){return this.elementName.length>0?this.elementLayer+": "+this.elementName:"no linked item"},ddLayer:function(){return this.$viewLayers.map(function(e){return e.name})}},mounted:function(){this.setValues()},watch:{selectedItemId:function(e){this.setValues()}},methods:{setValues:function(){var e=this;if(void 0!=this.selectedItemId&&this.selectedItemId.length>0){this.elementId=this.selectedItemId;var t=this.elements.find(function(t){return t.id==e.selectedItemId});this.elementLayer=void 0!=t?t.type:"",this.elementName=void 0!=t?t.name:""}else this.elementLayer="",this.elementId="",this.elementName=""},changeItem:function(){this.$emit("changeItem",this.elementId),this.showEdit=!1}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEdit,expression:"!showEdit"}],staticClass:"col-11"},[n("b-form-input",{attrs:{value:e.formInputName,disabled:""}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditable&!e.showEdit,expression:"isEditable & !showEdit"}],staticClass:"col-1"},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-gear")],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],staticClass:"col-1"},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){e.showEdit=!e.showEdit}}},[n("b-icon-arrow-left")],1)],1),e._v(" "),e.showEdit?n("div",{staticClass:"col-4"},[n("b-form-select",{attrs:{options:e.ddLayer},model:{value:e.elementLayer,callback:function(t){e.elementLayer=t},expression:"elementLayer"}})],1):e._e(),e._v(" "),e.showEdit?n("div",{staticClass:"col-7"},[n("b-form-select",{attrs:{options:e.ddItems},on:{change:function(t){return e.changeItem()}},model:{value:e.elementId,callback:function(t){e.elementId=t},expression:"elementId"}})],1):e._e()])},staticRenderFns:[]};var P=n("VU/8")(D,F,!1,function(e){n("k3B1")},"data-v-56f137eb",null).exports,B={props:{rowLabel:{type:String,required:!0},dataObject:{type:Object,required:!0},objectProp:{type:String,required:!0},isEditable:{type:Boolean,required:!1,default:!0}},methods:{itemChanged:function(e,t){this.$emit("propChanged",e,t)}}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v(e._s(e.rowLabel)+":")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-textarea",{attrs:{rows:"2","max-rows":"6",disabled:!e.isEditable},on:{change:function(t){return e.itemChanged(e.dataObject[e.objectProp],e.objectProp)}},model:{value:e.dataObject[e.objectProp],callback:function(t){e.$set(e.dataObject,e.objectProp,t)},expression:"dataObject[objectProp]"}})],1)])},staticRenderFns:[]};var T=n("VU/8")(B,z,!1,function(e){n("QLfR")},"data-v-d82803f8",null).exports,H={props:{rowLabel:{type:String,required:!0},elements:{type:Array,required:!1,default:function(){return[]}},relations:{type:Array,required:!1,default:function(){return[]}},selectedItemId:{type:String,required:!0},isEditable:{type:Boolean,required:!1,default:!0}},components:{MyDropdownItem:P},methods:{changeItem:function(e){this.$emit("changeItem",e)}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v(e._s(e.rowLabel)+":")]),e._v(" "),n("div",{staticClass:"col-10"},[n("my-dropdown-item",{attrs:{elements:e.elements,relations:e.relations,selectedItemId:e.selectedItemId,isEditable:e.isEditable},on:{changeItem:e.changeItem}})],1)])},staticRenderFns:[]};var K=n("VU/8")(H,U,!1,function(e){n("vzqZ")},"data-v-29313e99",null).exports,G={props:{rowLabel:{type:String,required:!0},dataObject:{type:Object,required:!0},objectProp:{type:String,required:!0},propValues:{type:Array,required:!0},isEditable:{type:Boolean,required:!1,default:!0}},methods:{itemChanged:function(e,t){this.$emit("propChanged",e,t)}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v(e._s(e.rowLabel)+":")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-select",{attrs:{options:e.propValues,disabled:!e.isEditable},on:{change:function(t){return e.itemChanged(e.dataObject[e.objectProp],e.objectProp)}},model:{value:e.dataObject[e.objectProp],callback:function(t){e.$set(e.dataObject,e.objectProp,t)},expression:"dataObject[objectProp]"}})],1)])},staticRenderFns:[]};var W=n("VU/8")(G,Q,!1,function(e){n("FxLy")},"data-v-52838a81",null).exports,Z=function(e,t){return e.filter(function(e){var n=e.values.find(function(e){return"element"==e.name});return void 0!=n&&n.value==t})},J=function(){return new Date(Date.now()).toISOString().substr(0,10)},Y=function(e,t,n){var i=e.values.find(function(e){return e.name==t});return void 0!=i?i.value:"Array"==n?[]:""},X=function(e,t,n){var i=e.values.find(function(e){return e.name==t});void 0!=i?i.value=n:(i={name:t,value:n},e.values.push(i))},ee=n("bOdI"),te=n.n(ee);var ne={getElement:function(e){return{id:e.id,name:e.name,type:e.type,values:e.values}},getRelease:function(e){return{id:e.id,name:e.name,type:e.type,releaseStart:Y(releaseObject,"releaseStart"),releaseEnd:Y(releaseObject,"releaseEnd")}},getRequirement:function(e){var t;return t={id:e.id,name:e.name,type:e.type,description:Y(e,"description"),tablet:Y(e,"tablet"),source:Y(e,"source"),sourcedetails:Y(e,"sourcedetails"),commitment:Y(e,"commitment")},te()(t,"type",Y(e,"type")),te()(t,"benefit",Y(e,"benefit")),t},getServiceInstance:function(e){return{id:e.id,name:e.name,type:e.type,functions:Y(e,"functions")}},setElementValue:function(e,t,n,i){if(-1!=["id","name","type"].indexOf(t))e[t]=n;else if("source"==t&&void 0!=i){X(e,t,n),Z(i,e.id).forEach(function(e){return ie.setRelationValue(e,"startId",n)})}else if("type"==t&&void 0!=i){X(e,t,n),i.filter(function(t){return t.endId==e.id}).forEach(function(e){return ie.setRelationValue(e,"layer",n)})}else X(e,t,n);X(e,"lastChange",J())},setElementValueArray:function(e,t,n,i){var a=[],r=Y(e,t,"Array");"add"==i?-1==r.indexOf(n)&&(r.push(n),a=r):"remove"==i&&(a=r.filter(function(e){return e!=n})),console.log(r),this.setElementValue(e,t,a)},addElement:function(e,t,n,i){var a=function(e){var t;do{t=Math.floor(1e6*Math.random()+1)}while(-1!=e.map(function(e){return e.id}).indexOf("ELM"+t));return"ELM"+t}(e),r={id:a,name:t,type:n},s=[];return void 0!=i&&(s=i),r.values=s,X(r,"lastChange",J()),e.push(r),a}};var ie={getRelation:function(e){var t=Y(e,"element").length>0;return{id:e.id,type:t?"Requirement":"Architektur",isRequirement:t,tablet:Y(e,"tablet"),startId:e.startId,endId:e.endId,layer:e.layer,title:Y(e,"title"),description:Y(e,"description"),status:Y(e,"status"),comment:Y(e,"comment")}},getRequirmentRealization:function(e){return{id:e.id,type:"Requirement",isRequirement:!0,startId:e.startId,endId:e.endId,layer:e.layer,requirement:Y(e,"element"),solved:Y(e,"solved"),status:Y(e,"status"),comment:Y(e,"comment")}},setRelationValue:function(e,t,n,i){if(-1!=["id","startId","layer"].indexOf(t))e[t]=n;else if("endId"==t){e[t]=n;var a=i.find(function(e){return e.id==n}),r=ne.getElement(a);e.layer=r.type}else X(e,t,n);X(e,"lastChange",J())},addRelation:function(e,t,n,i,a){var r=function(e){var t;do{t=Math.floor(1e6*Math.random()+1)}while(-1!=e.map(function(e){return e.id}).indexOf("CON"+t));return"CON"+t}(e),s={id:r,startId:t,endId:n,layer:i},l=[];return void 0!=a&&(l=a),s.values=l,X(s,"lastChange",J()),e.push(s),r}},ae={props:{selectedRelationId:{type:String,required:!1,default:""},elements:{type:Array,required:!0},relations:{type:Array,required:!0},requirement:{type:Object,required:!0}},components:{MyDropdownItem:P,MyModalRowAddLink:k,MyModalRowTextarea:T,MyModalRowDropdownItem:K,MyModalRowSelect:W},computed:{ddStatus:function(){return void 0!=this.$relationStatus?this.$relationStatus:[]},ddLayeredElements:function(){var e=this.elements.filter(function(e){return-1==["Requirement","Applikationsfunktion"].indexOf(e.type)}).map(function(e){return{value:e.id,text:e.name,type:e.type}}),t=d3.nest().key(function(e){return e.type}).entries(e);return t=t.map(function(e){return{label:e.key,options:e.values.sort(function(e,t){return e.text<t.text?-1:1})}})},realizations:function(){return Z(this.relations,this.requirement.id).map(function(e){return ie.getRequirmentRealization(e)})}},methods:{linkRealization:function(e){var t={};t.startId=this.requirement.source,t.endId=e,t.type="Requirement",t.element=this.requirement.id,this.$emit("addRelation",t)},showRelation:function(e){this.$emit("showRelation",e)},changeEnd:function(e){this.$emit("changeItem",e,"endId")},changeSolved:function(e){this.$emit("changeItem",e,"solved")},itemChanged:function(e,t){this.$emit("changeItem",e,t)}}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-targets",modifiers:{"requirement-targets":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("div",[e._v("Requirement :: Realisierung "),n("b-badge",{staticClass:"bg-info",attrs:{pill:""}},[e._v(e._s(e.realizations.length>0?e.realizations.length:""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-targets",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-container",{attrs:{fluid:""}},[n("my-modal-row-add-link",{attrs:{ddItems:e.ddLayeredElements,buttonText:"Relation",allowNewValue:!1},on:{linkItem:e.linkRealization}}),e._v(" "),e._l(e.realizations,function(t){return n("b-card",{key:t.id,staticClass:"m-1 p-2",attrs:{"no-body":""}},[t.id!=e.selectedRelationId?n("b-row",{staticClass:"mt-2 mb-2"},[n("b-col",[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showRelation(t.id)}}},[n("b-icon-gear")],1)],1)],1):e._e(),e._v(" "),n("my-modal-row-dropdown-item",{attrs:{rowLabel:"Ende",elements:e.elements,selectedItemId:t.endId,isEditable:t.id==e.selectedRelationId},on:{changeItem:e.changeEnd}}),e._v(" "),n("my-modal-row-select",{attrs:{rowLabel:"Status",dataObject:t,objectProp:"status",propValues:e.ddStatus,isEditable:t.id==e.selectedRelationId},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-dropdown-item",{attrs:{rowLabel:"Realisiert",elements:e.elements,relations:e.relations,selectedItemId:t.solved,isEditable:t.id==e.selectedRelationId},on:{changeItem:e.changeSolved}}),e._v(" "),n("my-modal-row-textarea",{attrs:{rowLabel:"Bemerkung",dataObject:t,objectProp:"comment",isEditable:t.id==e.selectedRelationId},on:{propChanged:e.itemChanged}})],1)})],2)],1)],1)],1)},staticRenderFns:[]};var se=n("VU/8")(ae,re,!1,function(e){n("C99W")},"data-v-253706c1",null).exports,le={props:{rowLabel:{type:String,required:!0},dataObject:{type:Object,required:!0},objectProp:{type:String,required:!0},isEditable:{type:Boolean,required:!1,default:!0}},methods:{itemChanged:function(e,t){this.$emit("propChanged",e,t)}}},oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-2"},[e._v(e._s(e.rowLabel)+":")]),e._v(" "),n("div",{staticClass:"col-10"},[n("b-form-input",{attrs:{type:"text",disabled:!e.isEditable},on:{change:function(t){return e.itemChanged(e.dataObject[e.objectProp],e.objectProp)}},model:{value:e.dataObject[e.objectProp],callback:function(t){e.$set(e.dataObject,e.objectProp,t)},expression:"dataObject[objectProp]"}})],1)])},staticRenderFns:[]};var de=n("VU/8")(le,oe,!1,function(e){n("zwfG")},"data-v-068af25f",null).exports,ce={props:{requirement:{type:Object,required:!0},elements:{type:Array,required:!0},hierarchy:{type:Array,required:!0}},components:{MyModalRowTextarea:T,MyModalRowInput:de,MyModalRowAddLink:k},computed:{requirementParentId:function(){var e=this,t=this.hierarchy.find(function(t){return t.subelemid==e.requirement.id});return void 0!=t?t.elemid:""},ddRequirements:function(){var e=this,t=this.elements.filter(function(t){return-1!=["Requirement"].indexOf(t.type)&&t.id!=e.requirement.id&&t.id!=e.requirementParentId&&-1==e.requirementChildren.map(function(e){return e.id}).indexOf(t.id)&&0==e.hierarchy.filter(function(e){return e.subelemid==t.id}).length}).map(function(t){return{value:t.id,text:t.name,tablet:e.getRequirementValue(t,"tablet")}}),n=d3.nest().key(function(e){return e.tablet}).entries(t);return n=n.map(function(e){return{label:e.key,options:e.values.sort(function(e,t){return e.text<t.text?-1:1})}})},ddTablet:function(){return this.$tabletComponents},requirementChildren:function(){var e=this,t=this.hierarchy.filter(function(t){return t.elemid==e.requirement.id}).map(function(e){return e.subelemid});return this.elements.filter(function(e){return-1!=t.indexOf(e.id)}).map(function(t){return{id:t.id,name:t.name,tablet:e.getRequirementValue(t,"tablet"),desc:e.getRequirementValue(t,"description")}})}},methods:{getRequirementValue:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:""},showRelation:function(e){this.$emit("showRelation",e)},addChild:function(e){var t={elemid:this.requirement.id,subelemid:e,method:"link"};this.$emit("changeHierarchy",t)}}},ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-children",modifiers:{"requirement-children":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("div",[e._v("Requirement :: Kinder "),n("b-badge",{class:{"bg-info":e.requirementChildren.length>0},attrs:{pill:""}},[e._v(e._s(e.requirementChildren.length>0?e.requirementChildren.length:""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-children",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-container",{attrs:{fluid:""}},[n("my-modal-row-add-link",{staticClass:"mb-2",attrs:{ddItems:e.ddRequirements,buttonText:"Requirement",allowNewValue:!1,ddPreCondition:e.ddTablet},on:{linkItem:e.addChild}}),e._v(" "),e._l(e.requirementChildren,function(t){return n("b-card",{key:t.id,staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{cols:"3"}},[n("h6",[n("span",{staticClass:"badge bg-primary text-white"},[e._v(e._s(t.tablet))])])]),e._v(" "),n("b-col",{attrs:{cols:"8"}}),e._v(" "),n("b-col",{attrs:{cols:"1"}},[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showRelation(t.id)}}},[n("b-icon-gear")],1)],1)],1),e._v(" "),n("my-modal-row-input",{attrs:{rowLabel:"Name",dataObject:t,objectProp:"name",isEditable:!1}}),e._v(" "),n("my-modal-row-textarea",{attrs:{rowLabel:"Beschreibung",dataObject:t,objectProp:"desc",isEditable:!1}})],1)})],2)],1)],1)],1)},staticRenderFns:[]};var me=n("VU/8")(ce,ue,!1,function(e){n("N5cw")},"data-v-6e89a510",null).exports,he={props:{requirement:{type:Object,required:!0},elements:{type:Array,required:!0}},components:{MyModalRowInput:de,MyModalRowSelect:W,MyModalRowTextarea:T,MyModalRowDropdownItem:K},computed:{ddRequirementTypes:function(){return void 0!=this.$requirementTypes?this.$requirementTypes:[]},ddCommitment:function(){return void 0!=this.$commitment?this.$commitment:[]},ddTablet:function(){return void 0!=this.$tabletComponents?this.$tabletComponents:[]}},methods:{itemChanged:function(e,t){this.$emit("changeItem",e,t)},changeSource:function(e){this.$emit("changeItem",e,"source")}}},pe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-info",modifiers:{"requirement-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[e._v("Requirement :: Allgemein")])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-info",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-container",{attrs:{fluid:""}},[n("my-modal-row-input",{attrs:{rowLabel:"Requirement-Id",dataObject:e.requirement,objectProp:"id",isEditable:!1}}),e._v(" "),n("my-modal-row-dropdown-item",{attrs:{rowLabel:"Quelle",elements:e.elements,selectedItemId:e.requirement.source},on:{changeItem:e.changeSource}}),e._v(" "),n("my-modal-row-select",{attrs:{rowLabel:"Tablet",dataObject:e.requirement,objectProp:"tablet",propValues:e.ddTablet},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-select",{attrs:{rowLabel:"Typ",dataObject:e.requirement,objectProp:"type",propValues:e.ddRequirementTypes},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-select",{attrs:{rowLabel:"Verbindlichkeit",dataObject:e.requirement,objectProp:"commitment",propValues:e.ddCommitment},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-input",{attrs:{rowLabel:"Quellen-Details",dataObject:e.requirement,objectProp:"sourcedetails"},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-textarea",{attrs:{rowLabel:"Titel",dataObject:e.requirement,objectProp:"name"},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-textarea",{attrs:{rowLabel:"Beschreibung",dataObject:e.requirement,objectProp:"description"},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-input",{attrs:{rowLabel:"Mehrwert",dataObject:e.requirement,objectProp:"benefit"},on:{propChanged:e.itemChanged}})],1)],1)],1)],1)},staticRenderFns:[]};var fe=n("VU/8")(he,pe,!1,function(e){n("eVFk")},"data-v-57a6ba9c",null).exports,ve={props:{relation:{type:Object,required:!0},elements:{type:Array,required:!0}},components:{MyModalRowSelect:W,MyModalRowInput:de,MyModalRowTextarea:T,MyModalRowDropdownItem:K},computed:{isRequirement:function(){return"Requirement"==this.relation.type},ddStatus:function(){return void 0!=this.$relationStatus?this.$relationStatus:[]},ddLayer:function(){return void 0!=this.$viewLayers?this.$viewLayers.map(function(e){return e.name}):[]},ddTablet:function(){return void 0!=this.$tabletComponents?this.$tabletComponents:[]},ddElements:function(){var e=this;return this.elements.filter(function(t){return t.type==e.relation.layer}).map(function(e){return{value:e.id,text:e.name}}).sort(function(e,t){return e.text>t.text?1:-1})}},methods:{itemChanged:function(e,t){this.$emit("changeItem",e,t)}}},be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.general-info",modifiers:{"general-info":!0}}],attrs:{block:"",variant:"outline-dark"}},[e._v("Allgemein")])],1),e._v(" "),n("b-collapse",{attrs:{id:"general-info",visible:"",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-container",{attrs:{fluid:""}},[n("my-modal-row-input",{attrs:{rowLabel:"Beziehungs-Id",dataObject:e.relation,objectProp:"id",isEditable:!1}}),e._v(" "),n("my-modal-row-input",{attrs:{rowLabel:"Typ",dataObject:e.relation,objectProp:"type",isEditable:!1}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-select",{attrs:{rowLabel:"Ebene",dataObject:e.relation,objectProp:"layer",propValues:e.ddLayer,isEditable:!1}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-select",{attrs:{rowLabel:"Tablet",dataObject:e.relation,objectProp:"tablet",propValues:e.ddTablet},on:{propChanged:e.itemChanged}}),e._v(" "),n("my-modal-row-select",{attrs:{rowLabel:"Start",dataObject:e.relation,objectProp:"startId",propValues:e.ddElements,isEditable:!e.isRequirement},on:{propChanged:e.itemChanged}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-select",{attrs:{rowLabel:"Ende",dataObject:e.relation,objectProp:"endId",propValues:e.ddElements},on:{propChanged:e.itemChanged}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-textarea",{attrs:{rowLabel:"Titel",dataObject:e.relation,objectProp:"title"},on:{propChanged:e.itemChanged}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-textarea",{attrs:{rowLabel:"Beschreibung",dataObject:e.relation,objectProp:"description"},on:{propChanged:e.itemChanged}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-select",{attrs:{rowLabel:"Status",dataObject:e.relation,objectProp:"status",propValues:e.ddStatus},on:{propChanged:e.itemChanged}}),e._v(" "),e.isRequirement?e._e():n("my-modal-row-textarea",{attrs:{rowLabel:"Bemerkung",dataObject:e.relation,objectProp:"comment"},on:{propChanged:e.itemChanged}})],1)],1)],1)],1)},staticRenderFns:[]};var ye=n("VU/8")(ve,be,!1,function(e){n("jMcp")},"data-v-4a1b3d4e",null).exports,ge={props:{requirement:{type:Object,required:!0},elements:{type:Array,required:!0},hierarchy:{type:Array,required:!0}},components:{MyModalRowTextarea:T,MyModalRowInput:de,MyModalRowAddLink:k,MyButtonUnlink:v},computed:{requirementChildrenIds:function(){var e=this;return this.hierarchy.filter(function(t){return t.elemid==e.requirement.id}).map(function(e){return e.subelemid})},ddRequirements:function(){var e=this,t=this.elements.filter(function(t){return-1!=["Requirement"].indexOf(t.type)&&t.id!=e.requirement.id&&-1==e.requirementChildrenIds.indexOf(t.id)}).map(function(t){return{value:t.id,text:t.name,tablet:e.getRequirementValue(t,"tablet")}}),n=d3.nest().key(function(e){return e.tablet}).entries(t);return n=n.map(function(e){return{label:e.key,options:e.values.sort(function(e,t){return e.text<t.text?-1:1})}})},requirementParent:function(){var e=this,t=this.hierarchy.find(function(t){return t.subelemid==e.requirement.id});if(void 0!=t){var n=this.elements.find(function(e){return e.id==t.elemid});if(void 0!=n)return{id:n.id,name:n.name,tablet:this.getRequirementValue(n,"tablet"),desc:this.getRequirementValue(n,"description")}}}},methods:{getRequirementValue:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:""},showRelation:function(e){this.$emit("showRelation",relationId)},addParent:function(e){var t={elemid:e,subelemid:this.requirement.id,method:"link"};this.$emit("changeHierarchy",t)},deleteHierarchy:function(e){var t={elemid:e,subelemid:this.requirement.id,method:"delete"};this.$emit("changeHierarchy",t)}}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.requirement-parent",modifiers:{"requirement-parent":!0}}],attrs:{block:"",variant:"outline-dark"}},[n("span",[e._v("Requirement :: Eltern "),n("b-badge",{class:{"bg-info":void 0!=e.requirementParent},attrs:{pill:""}},[e._v(e._s(void 0!=e.requirementParent?"set":""))])],1)])],1),e._v(" "),n("b-collapse",{attrs:{id:"requirement-parent",accordion:"modal-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[void 0==e.requirementParent?n("my-modal-row-add-link",{staticClass:"mb-2",attrs:{ddItems:e.ddRequirements,buttonText:"Requirement",allowNewValue:!1},on:{linkItem:e.addParent}}):e._e()],1)],1),e._v(" "),void 0!=e.requirementParent?n("b-row",[n("b-col",{attrs:{cols:"11"}},[n("b-card",{staticClass:"m-1 p-2",attrs:{"no-body":""}},[n("b-row",{staticClass:"mt-2"},[n("b-col",[n("h6",[n("span",{staticClass:"badge bg-primary text-white"},[e._v(e._s(e.requirementParent.tablet))])])])],1),e._v(" "),n("my-modal-row-input",{attrs:{rowLabel:"Name",dataObject:e.requirementParent,objectProp:"name",isEditable:!1}}),e._v(" "),n("my-modal-row-textarea",{attrs:{rowLabel:"Beschreibung",dataObject:e.requirementParent,objectProp:"desc",isEditable:!1}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"1"}},[n("b-button",{staticClass:"mt-1",attrs:{size:"sm",variant:"outline-dark"},on:{click:function(t){return e.showRelation(e.requirementParent.id)}}},[n("b-icon-gear")],1),e._v(" "),n("my-button-unlink",{attrs:{"item-id":e.requirementParent.id},on:{unlinkItem:e.deleteHierarchy}})],1)],1):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var Ie=n("VU/8")(ge,we,!1,function(e){n("cWUJ")},"data-v-33db01f4",null).exports,Ee={props:{relationItemId:{type:String,required:!1,default:""},requirementId:{type:String,required:!1,default:""},show:{type:Boolean,default:!1},elements:{type:Array,required:!0},relations:{type:Array,required:!0},hierarchy:{type:Array,required:!0}},components:{MyRelationModalRequirementChildren:me,MyRelationModalRequirementRealize:se,MyRelationModalRequirementDetails:fe,MyRelationModalGeneral:ye,MyRelationModalRequirementParent:Ie},data:function(){return{displayedRelationId:"",displayedRequirementId:"",showComponentModel:this.show,viewHistory:[]}},computed:{displayedRelation:function(){var e=this;if(this.displayedRelationId.length>0){var t=this.relations.find(function(t){return t.id==e.displayedRelationId});if(void 0!=t){var n=ie.getRelation(t);return n.isRequirement?ie.getRequirmentRealization(t):n}}},displayedRequirement:function(){var e=this;if(this.displayedRequirementId.length>0){var t=this.elements.find(function(e){return e.id==requirementId});return ne.getRequirement(t)}if(void 0!=this.displayedRelation&&this.displayedRelation.isRequirement){t=this.elements.find(function(t){return t.id==e.displayedRelation.requirement});return ne.getRequirement(t)}},isRequirement:function(){return void 0!=this.displayedRequirement},isRelation:function(){return void 0!=this.displayedRelation},modalTitle:function(){return this.isRelation&&this.isRequirement?"Realisierung von "+this.displayedRelation.id+" (Requirement "+this.displayedRequirement.id+")":this.isRequirement?"Requirement "+this.displayedRequirement.id:this.isRelation?"Beziehung "+this.displayedRelation.id:"failed"}},watch:{show:function(e){this.showComponentModel=e,e&&(this.displayedRelationId=this.relationItemId,this.displayedRequirementId=this.requirementId)},relationItemId:function(e){this.displayedRelationId=e},requirementId:function(e){this.displayedRequirementId=e}},methods:{itemChanged:function(e,t){var n={};n.relationId=this.displayedRelation.id,n.prop=t,n.newValue=e,this.$emit("recordChange",n)},hideModal:function(){this.viewHistory=[],this.$emit("closeModal",!1)},addRelation:function(e){void 0==e.type&&(e.type="Relation"),this.$emit("newRelation",e)},showLastView:function(){var e=this.viewHistory.pop();this.$emit("showRelationDetails",e)},showRelation:function(e){this.viewHistory.push(this.displayedRelation.id),this.$emit("showRelationDetails",e)},changeHierarchy:function(e){this.$emit("changeHierarchy",e)}}},_e={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{scrollable:"",size:"xl","ok-only":"",title:e.modalTitle},on:{hide:e.hideModal,blur:e.hideModal,close:e.hideModal},model:{value:e.showComponentModel,callback:function(t){e.showComponentModel=t},expression:"showComponentModel"}},[n("b-container",{attrs:{fluid:""}},[e.viewHistory.length>0?n("b-row",{staticClass:"mb-2"},[n("b-col",[n("b-button",{attrs:{variant:"outline-dark"},on:{click:function(t){return e.showLastView()}}},[n("b-icon-arrow-left")],1)],1)],1):e._e(),e._v(" "),n("b-row",[n("b-col",[n("div",{staticClass:"accordion",attrs:{role:"tablist"}},[e.isRelation?n("my-relation-modal-general",{attrs:{relation:e.displayedRelation,elements:e.elements},on:{changeItem:e.itemChanged}}):e._e(),e._v(" "),e.isRequirement?n("my-relation-modal-requirement-details",{attrs:{requirement:e.displayedRequirement,elements:e.elements},on:{changeItem:e.itemChanged}}):e._e(),e._v(" "),e.isRequirement?n("my-relation-modal-requirement-parent",{attrs:{requirement:e.displayedRequirement,elements:e.elements,hierarchy:e.hierarchy},on:{showRelation:e.showRelation,changeHierarchy:e.changeHierarchy}}):e._e(),e._v(" "),e.isRequirement?n("my-relation-modal-requirement-children",{attrs:{requirement:e.displayedRequirement,elements:e.elements,hierarchy:e.hierarchy},on:{showRelation:e.showRelation,changeHierarchy:e.changeHierarchy}}):e._e(),e._v(" "),e.isRequirement?n("my-relation-modal-requirement-realize",{attrs:{selectedRelationId:e.displayedRelationId,requirement:e.displayedRequirement,elements:e.elements,relations:e.relations},on:{addRelation:e.addRelation,showRelation:e.showRelation,changeItem:e.itemChanged}}):e._e()],1)])],1)],1)],1)},staticRenderFns:[]};var Re=n("VU/8")(Ee,_e,!1,function(e){n("6b5k")},"data-v-aab02358",null).exports,ke={props:{headers:{type:Array,required:!0},records:{type:Array,required:!0},elements:{type:Array,required:!0},relations:{type:Array,required:!0},addedItemId:{type:String,required:!1,default:""},hierarchy:{type:Array,required:!0}},components:{MyRelationModal:Re,MyButtonDelete:j},data:function(){return{selectedRelationItemId:"",showModal:!1,showDel:[]}},computed:{tableColumns:function(){return this.headers},tableObjects:function(){return this.records}},watch:{addedItemId:function(e){e.length>0&&this.showRelationDetails(e)},tableObjects:function(e){var t=this;e.forEach(function(e,n){t.showDel[n]=!1})}},methods:{hideRelationDetails:function(e){this.showModal=!1},showRelationDetails:function(e){this.selectedRelationItemId=e,this.showModal=!0},deleteRelation:function(e){this.$emit("deleteRelation",e)},itemChanged:function(e){this.$emit("changeRelation",e)},elementNameById:function(e){var t="<external>",n=this.elements.find(function(t){return t.id==e});return void 0!=n&&(t=n.name),t},newRelation:function(e){this.$emit("newRelation",e)},addRequirement:function(e){void 0==e.type&&(e.type="Requirement"),this.$emit("newRelation",e)},addRelation:function(e){void 0==e.type&&(e.type="Relation"),this.$emit("newRelation",e)},changeHierarchy:function(e){this.$emit("changeHierarchy",e)}}},Ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid mt-3"},[n("div",{staticClass:"row"},[n("my-relation-modal",{attrs:{relationItemId:e.selectedRelationItemId,show:e.showModal,elements:e.elements,relations:e.relations,hierarchy:e.hierarchy},on:{closeModal:e.hideRelationDetails,recordChange:e.itemChanged,newRelation:e.newRelation,showRelationDetails:e.showRelationDetails,changeHierarchy:e.changeHierarchy}})],1),e._v(" "),n("div",{staticClass:"row mt-3"},[n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-dark"},on:{click:function(t){return e.addRelation({})}}},[n("b-icon-node-plus"),e._v(" Architektur-Beziehung")],1),e._v(" "),n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-dark"},on:{click:function(t){return e.addRequirement({})}}},[n("b-icon-node-plus"),e._v(" Requirement")],1)],1),e._v(" "),n("div",{staticClass:"row mt-2"},[n("b-table",{attrs:{striped:"",hover:"",items:e.tableObjects,fields:e.tableColumns,"primary-key":"id"},scopedSlots:e._u([{key:"cell(start)",fn:function(t){return[e._v("\n                "+e._s(e.elementNameById(t.item.startId))+"\n            ")]}},{key:"cell(ende)",fn:function(t){return[e._v("\n                "+e._s(e.elementNameById(t.item.endId))+"\n            ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(n){return e.showRelationDetails(t.item.id)}}},[n("b-icon-gear")],1),e._v(" "),n("my-button-delete",{attrs:{itemId:t.item.id},on:{deleteItem:e.deleteRelation}})]}}])})],1)])},staticRenderFns:[]};var qe=n("VU/8")(ke,Ce,!1,function(e){n("FMtu")},"data-v-77f6e387",null).exports,xe={props:{relations:{type:Array,required:!0},elements:{type:Array,required:!0},hierarchy:{type:Array,required:!0},addedRelationId:{type:String,required:!1,default:""},alertMessage:{type:String,required:!1,default:""}},components:{TheRelationsTable:qe},data:function(){return{showAlertMessage:!1}},watch:{alertMessage:function(e){!this.showAlertMessage&&e.length>0?this.showAlertMessage=!0:0==e.length&&(this.showAlertMessage=!1)}},computed:{tableHeader:function(){return[{key:"actions",label:"Aktionen",sortable:!1},{key:"id",sortable:!1},{key:"layer",label:"Ebene",sortable:!0},{key:"type",label:"Typ",sortable:!0},{key:"start",sortable:!0},{key:"ende",sortable:!0},{key:"tablet",sortable:!0},{key:"title",label:"Titel",sortable:!0},{key:"description",label:"Beschreibung",sortable:!0}]},tableObjects:function(){var e=this;return this.relations.length>0?this.relations.map(function(t){var n=e.getContentByRelation(t),i={id:t.id,type:n.type,startId:t.startId,endId:t.endId,layer:t.layer,title:n.title,description:n.description,tablet:n.tablet};return"Requirement"==n.type&&(i.commitment=n.commitment,i.status=n.status,i.solved=n.solved),i}):[]}},methods:{getRelationChange:function(e){this.$emit("changeRelation",e)},getContentByRelation:function(e){var t={},n=e.values.find(function(e){return"element"==e.name});if(void 0!=n){t.type="Requirement";var i=this.elements.find(function(e){return e.id==n.value});t.title=i.name,t.description=this.getObjectValueByName(i,"description"),t.tablet=this.getObjectValueByName(i,"tablet"),t.commitment=this.getObjectValueByName(i,"commitment"),t.status=this.getObjectValueByName(i,"status"),t.solved=this.getObjectValueByName(i,"solved")}else t.type="Architektur",t.tablet="<not supported>",void 0!=(n=e.values.find(function(e){return"data"==e.name}))?(t.title="none",t.description=n.value):(t.title=this.getObjectValueByName(e,"title"),t.description=this.getObjectValueByName(e,"description"));return t},getObjectValueByName:function(e,t){var n=e.values.find(function(e){return e.name==t});return void 0!=n?n.value:""},newRelation:function(e){this.$emit("newRelation",e)},deleteRelation:function(e){this.$emit("deleteRelation",e)},emitClose:function(){this.$emit("alertClose")},changeHierarchy:function(e){this.$emit("changeHierarchy",e)}}},Ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row ml-2"},[n("b-alert",{attrs:{show:e.showAlertMessage,variant:"danger",dismissible:""},on:{dismissed:function(t){return e.emitClose()}}},[e._v("\n        "+e._s(e.alertMessage)+"\n    ")]),e._v(" "),n("the-relations-table",{attrs:{headers:e.tableHeader,records:e.tableObjects,elements:e.elements,relations:e.relations,hierarchy:e.hierarchy,"added-item-id":e.addedRelationId},on:{changeRelation:e.getRelationChange,newRelation:e.newRelation,deleteRelation:e.deleteRelation,changeHierarchy:e.changeHierarchy}})],1)},staticRenderFns:[]};var Se=n("VU/8")(xe,Ne,!1,function(e){n("lDdV")},"data-v-75389a3d",null).exports,Le=n("mvHQ"),$e=n.n(Le),Me={methods:{loadTextFromFile:function(e){var t=this,n=e.target.files[0],i=new FileReader;i.onload=function(e){return t.$emit("load",e.target.result)},i.readAsText(n,"UTF-8")}}},Ae={render:function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"text-reader"},[t("input",{attrs:{type:"file"},on:{change:this.loadTextFromFile}})])},staticRenderFns:[]};var Oe=n("VU/8")(Me,Ae,!1,function(e){n("p6wL")},"data-v-a23222d2",null).exports,Ve={props:{storage:{type:Object,required:!0}},components:{BasicInputFileReader:Oe},methods:{loadStorage:function(e){try{var t=JSON.parse(e);this.$emit("newData",t)}catch(e){alert(e.message)}},downloadStorage:function(){var e=encodeURIComponent($e()(this.storage));this.generateFileAndDownload("data:text/csv;charset=utf-8,"+e,"databaseCLReport_"+this.getCurrentDate()+".txt")},downloadRequirements:function(){var e=this,t="".concat("Id;","Übergeordnete Id;","Titel;","Beschreibung;","Mehrwert;","Typ;","IT-Service Tablet;","Verbindlichkeit;","zu erfüllen von;","gestellt von;","Quellenzusatz;","Zeitpunkt Vorhaben;","Bemerkung\n");this.storage.relations.filter(function(e){return void 0!=e.values.find(function(e){return"element"==e.name})}).forEach(function(n){var i=n.values.find(function(e){return"element"==e.name}).value,a=e.storage.elements.find(function(e){return e.id==i});t=t.concat(a.id+";","Übergeordnete Id;",a.name+";",e.getObjectValueByName(a,"description")+";","Mehrwert;","Typ;",e.getObjectValueByName(a,"tablet")+";",e.getObjectValueByName(a,"commitment")+";",n.endId+";",n.startId+";","Quellenzusatz;","Zeitpunkt Vorhaben;",e.getObjectValueByName(a,"comment")+"\n")}),this.generateFileAndDownload("data:text/csv;charset=utf-8,"+encodeURI(t),"CLrequirements_"+this.getCurrentDate()+".txt")},generateFileAndDownload:function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click()},getCurrentDate:function(){return new Date(Date.now()).toISOString().substr(0,10)}}},je={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"w-100 bg-light p-1"},[n("b-col",{attrs:{cols:"4"}},[e._v("Datensatz: \n        "),n("basic-input-file-reader",{on:{load:e.loadStorage}})],1),e._v(" "),n("b-col",{attrs:{cols:"6"}}),e._v(" "),n("b-col",{attrs:{cols:"1"}},[n("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"light"},on:{click:function(t){return e.downloadStorage()}}},[n("b-icon-cloud-arrow-down"),e._v(" Daten/txt\n        ")],1)],1),e._v(" "),n("b-col",{attrs:{cols:"1"}},[n("b-button",{staticClass:"m-1",attrs:{size:"sm",variant:"light"},on:{click:function(t){return e.downloadRequirements()}}},[n("b-icon-cloud-arrow-down"),e._v(" REQs/csv\n        ")],1)],1)],1)},staticRenderFns:[]};var De={name:"App",components:{TheSectionOverview:A,TheSectionDetails:Se,TheSectionStorage:n("VU/8")(Ve,je,!1,function(e){n("7V6F")},"data-v-5b6ef2fe",null).exports},data:function(){return{storage:{elements:[],hierarchy:[],relations:[]},selectedElementIds:[],selectedNestedIds:[],selectedRelations:[],newRelationId:"",newElementId:"",alertMessageDetails:""}},computed:{storageObjects:function(){return this.storage.elements},selectedConsumeRelations:function(){var e=[];if(1==this.selectedElementIds.length){var t=this.selectedNestedIds.map(function(e){return e.value});e=this.storage.relations.filter(function(e){return-1!=t.indexOf(e.startId)})}return e},selectedDependencyRelations:function(){var e=this,t=[];if(this.selectedElementIds.length<2){var n=this.selectedNestedIds.map(function(e){return e.value});t=this.storage.relations.filter(function(e){return-1!=n.indexOf(e.endId)})}else if(this.selectedNestedIds.length>1){n=this.selectedNestedIds.map(function(e){return e.value});t=this.storage.relations.filter(function(t){var i=n.indexOf(t.endId),a=n.indexOf(t.startId);return-1!=i&&-1!=a&&e.selectedNestedIds[i].parent!=e.selectedNestedIds[a].parent})}return t}},watch:{selectedConsumeRelations:{deep:!0,handler:function(){this.setSelectionRelations()}},selectedDependencyRelations:{deep:!0,handler:function(){this.setSelectionRelations()}}},methods:{setStorage:function(e){this.storage=e},changedSelectedElementIds:function(e,t){this.selectedNestedIds=e,this.selectedElementIds=t,0==this.selectedElementIds.length&&(this.selectedNestedIds=this.storage.elements.map(function(e){return{value:e.id}}))},setSelectionRelations:function(){var e=this.selectedConsumeRelations.concat(this.selectedDependencyRelations);this.selectedRelations=e.filter(function(e,t,n){return n.map(function(e){return e.id}).indexOf(e.id)===t})},deleteRelation:function(e){this.storage.relations=this.storage.relations.filter(function(t){return t.id!=e})},setRelationValue:function(e){var t=this.storage.relations.find(function(t){return t.id==e.relationId});if(ie.getRelation(t).isRequirement){var n=ie.getRequirmentRealization(t);if(void 0!=n[e.prop])ie.setRelationValue(t,e.prop,e.newValue,this.storage.elements);else{var i=this.storage.elements.find(function(e){return e.id==n.requirement});void 0!=ne.getRequirement(i)[e.prop]&&ne.setElementValue(i,e.prop,e.newValue,this.storage.relations)}}else ie.setRelationValue(t,e.prop,e.newValue)},setElementValue:function(e){var t=this.storage.elements.find(function(t){return t.id==e.elementId});if(-1!=["functions"].indexOf(e.prop)){var n=this.storage.elements.find(function(t){return t.id==e.newValue});if(void 0==n){var i=ne.addElement(this.storage.elements,e.newValue,"Servicefunction");n=this.storage.elements.find(function(e){return e.id==i})}ne.setElementValueArray(t,e.prop,n.id,e.method)}else ne.setElementValue(t,e.prop,e.newValue)},changeHierarchy:function(e){if("delete"==e.method){var t=this.storage.hierarchy.filter(function(t){return!(t.elemid==e.elemid&&t.subelemid==e.subelemid)});this.storage.hierarchy.length>t.length&&(this.storage.hierarchy=t)}else if("link"==e.method){var n={elemid:e.elemid,subelemid:e.subelemid};this.storage.hierarchy.push(n)}else if("add"==e.method){if("object"==r()(e.subelemid)){var i=ne.addElement(this.storage.elements,e.subelemid.name,e.subelemid.type);n={elemid:e.elemid,subelemid:i}}else if("object"==r()(e.elemid))n={elemid:i=ne.addElement(this.storage.elements,e.elemid.name,e.elemid.type),subelemid:e.subelemid};this.storage.hierarchy.push(n)}},resetDetailAlert:function(){this.alertMessageDetails=""},addRelation:function(e){var t=this,n=void 0!=e.element;if(n||0!=this.selectedElementIds.length){var i=this.storage.elements.find(function(e){return e.id==t.selectedElementIds[0]}),a=ie.addRelation(this.storage.relations,void 0!=i?this.selectedElementIds[0]:"",void 0!=this.selectedElementIds[1]?this.selectedElementIds[1]:"",void 0!=i?i.type:""),r=this.storage.relations.find(function(e){return e.id==a});if(ie.setRelationValue(r,"status",this.$relationStatus[0]),"Requirement"==e.type){if(n)s=e.element;else var s=ne.addElement(this.storage.elements,"Neues Requirement","Requirement",[{name:"commitment",value:this.$commitment[0]}]);ie.setRelationValue(r,"element",s);var l=this.storage.elements.find(function(e){return e.id==s});void 0!=i&&ne.setElementValue(l,"source",i.id,this.storage.relations),void 0!=e.startId&&ne.setElementValue(l,"source",e.startId,this.storage.relations),void 0!=e.endId&&ie.setRelationValue(r,"endId",e.endId,this.storage.elements)}this.newRelationId=a}else this.alertMessageDetails="Min. ein Element selektieren"},addElement:function(e){var t=ne.addElement(this.storage.elements,"Neu "+e,e);this.newElementId=t}}},Fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{id:"app",fluid:""}},[n("the-section-storage",{attrs:{storage:e.storage},on:{newData:e.setStorage}}),e._v(" "),n("the-section-overview",{attrs:{elements:e.storage.elements,hierarchy:e.storage.hierarchy,consumeRelations:e.selectedConsumeRelations,dependencyRelations:e.selectedDependencyRelations,newElementId:e.newElementId},on:{selectionChanged:e.changedSelectedElementIds,changeElement:e.setElementValue,changeHierarchy:e.changeHierarchy,addElement:e.addElement}}),e._v(" "),n("the-section-details",{attrs:{relations:e.selectedRelations,elements:e.storageObjects,hierarchy:e.storage.hierarchy,"added-relation-id":e.newRelationId,"alert-message":e.alertMessageDetails},on:{changeRelation:e.setRelationValue,newRelation:e.addRelation,alertClose:e.resetDetailAlert,deleteRelation:e.deleteRelation,changeHierarchy:e.changeHierarchy}}),e._v(" "),n("b-row")],1)},staticRenderFns:[]};var Pe=n("VU/8")(De,Fe,!1,function(e){n("yYPn")},null,null).exports,Be=n("Tqaz");n("Jmt5"),n("9M+g"),n("f4AQ");i.default.config.productionTip=!1,i.default.use(Be.a),i.default.use(Be.b),i.default.mixin({created:function(){this.$tabletComponents=[{label:"Utility",options:["Utility"]},{label:"Warranty",options:["Warranty","Verfügbarkeit","Sicherheit","Kapazität"]},{label:"Organisation",options:["Organisation","Kapazitäten","Fähigkeiten"]},{label:"Prozesse",options:["Prozesse"]},{label:"Finanzen",options:["Finanzen"]},{label:"Reporting",options:["Reporting"]},{label:"Management Systeme",options:["Management Systeme"]},{label:"Technik",options:["Technik"]},{label:"Inter-Service-Beziehungen",options:["Inter-Service-Beziehungen"]}],this.$commitment=["Vorgabe","Anforderung","Annahme"],this.$requirementTypes=["Funktional","Nicht-Funktional"],this.$relationStatus=["aufgenommen","freigegeben","realisiert","zurückgestellt","ausgeschlossen"],this.$relationTypes={norelation:{name:"no relation",fill:"#dddddd"},consume:{name:"consume",fill:"#cd5c5c"},dependency:{name:"dependency",fill:"#5c9acd"},bidirection:{name:"bi-direction",fill:"#cdb35c"},selection:{name:"selection",fill:"#eeee00"}},this.$viewLayers=[{name:"Projekt"},{name:"Funktionalität"},{name:"Release"},{name:"Solution"},{name:"Serviceinstanz"},{name:"Applikation"},{name:"Netzwerk"}]}}),new i.default({el:"#app",components:{App:Pe},template:"<App/>"})},QLfR:function(e,t){},RjPl:function(e,t){},XTta:function(e,t){},"Zh/s":function(e,t){},cWUJ:function(e,t){},ds9d:function(e,t){},eQfS:function(e,t){},eVFk:function(e,t){},hcA5:function(e,t){},jMcp:function(e,t){},k3B1:function(e,t){},kbEv:function(e,t){},lDdV:function(e,t){},p6wL:function(e,t){},uEZm:function(e,t){},vzqZ:function(e,t){},yYPn:function(e,t){},zwfG:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.82c2a2119e01ef417674.js.map